!function e(t,a,n){function i(r,s){if(!a[r]){if(!t[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(l)return l(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var m=a[r]={exports:{}};t[r][0].call(m.exports,function(e){var a=t[r][1][e];return i(a?a:e)},m,m.exports,e,t,a,n)}return a[r].exports}for(var l="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e){"use strict";var t={PageView:e("./views/Page.jsx"),CityPageView:e("./views/pages/City.jsx"),HomePageView:e("./views/pages/Home.jsx"),ProfilePageView:e("./views/pages/Profile.jsx"),WalkPageView:e("./views/pages/Walk.jsx")},a={CreateWalkView:e("./views/CreateWalk.jsx")};e("intl/Intl.min"),document.addEventListener("DOMContentLoaded",function(){var e=document.body.getAttribute("data-pageViewName")||"PageView",n=a[e];try{if(n)switch(e){case"CreateWalkView":React.render(React.createElement(n,{locale:JanesWalk.locale,data:JanesWalk.walk.data,city:JanesWalk.city,user:JanesWalk.user,url:JanesWalk.walk.url,valt:JanesWalk.form.valt}),document.getElementById("createwalk"))}else new t[e]($(document.body))}catch(i){console.error("Error instantiating page view "+e+": "+i.stack)}var l=document.getElementById("ccm-toolbar");l&&window.addEventListener("keyup",function(e){if("INPUT"!==e.target.tagName)switch(e.preventDefault(),String(e.key||e.keyCode&&String.fromCharCode(e.keyCode)||e.char).toUpperCase()){case"M":l.style.display="block"!==l.style.display&&l.style.display?"block":"none"}})})},{"./views/CreateWalk.jsx":4,"./views/Page.jsx":6,"./views/pages/City.jsx":19,"./views/pages/Home.jsx":20,"./views/pages/Profile.jsx":21,"./views/pages/Walk.jsx":22,"intl/Intl.min":2}],2:[function(e,t,a){(function(e){!function(e,n){var i=n();"function"==typeof define&&define.amd&&define(i),"object"==typeof a&&(t.exports=i),e.Intl||(e.Intl=i,i.__applyLocaleSensitivePrototypes()),e.IntlPolyfill=i}("undefined"!=typeof e?e:this,function(){"use strict";function e(e){return q.test(e)?U.test(e)?!1:H.test(e)?!1:!0:!1}function t(e){var t,a;e=e.toLowerCase(),a=e.split("-");for(var n=1,i=a.length;i>n;n++)if(2===a[n].length)a[n]=a[n].toUpperCase();else if(4===a[n].length)a[n]=a[n].charAt(0).toUpperCase()+a[n].slice(1);else if(1===a[n].length&&"x"!=a[n])break;e=tt.call(a,"-"),(t=e.match(B))&&t.length>1&&(t.sort(),e=e.replace(RegExp("(?:"+B.source+")+","i"),tt.call(t,""))),G.call(ut.tags,e)&&(e=ut.tags[e]),a=e.split("-");for(var n=1,i=a.length;i>n;n++)G.call(ut.subtags,a[n])?a[n]=ut.subtags[a[n]]:G.call(ut.extLang,a[n])&&(a[n]=ut.extLang[a[n]][0],1===n&&ut.extLang[a[1]][1]===a[0]&&(a=Q.call(a,n++),i-=1));return tt.call(a,"-")}function a(){return I}function n(e){var t=String(e),a=F(t);return ot.test(a)===!1?!1:!0}function i(a){if(void 0===a)return new O;for(var n=new O,a="string"==typeof a?[a]:a,i=A(a),l=i.length,r=0;l>r;){var s=String(r),c=s in i;if(c){var o=i[s];if(null==o||"string"!=typeof o&&"object"!=typeof o)throw new TypeError("String or Object type expected");var m=String(o);if(!e(m))throw new RangeError("'"+m+"' is not a structurally valid language tag");m=t(m),-1===Z.call(n,m)&&et.call(n,m)}r++}return n}function l(e,t){for(var a=t;;){if(Z.call(e,a)>-1)return a;var n=a.lastIndexOf("-");if(0>n)return;n>=2&&"-"==a.charAt(n-2)&&(n-=2),a=a.substring(0,n)}}function r(e,t){for(var n,i=0,r=t.length;r>i&&!n;){var s=t[i],c=String(s).replace(mt,""),n=l(e,c);i++}var o=new M;if(void 0!==n){if(o["[[locale]]"]=n,String(s)!==String(c)){var m=s.match(mt)[0],u=s.indexOf("-u-");o["[[extension]]"]=m,o["[[extensionIndex]]"]=u}}else o["[[locale]]"]=a();return o}function s(e,t){return r(e,t)}function c(e,t,a,n,i){if(0===e.length)throw new ReferenceError("No locale data has been provided for this object yet.");var l=a["[[localeMatcher]]"];if("lookup"===l)var c=r(e,t);else var c=s(e,t);var o=c["[[locale]]"];if(G.call(c,"[[extension]]"))var m=c["[[extension]]"],u=c["[[extensionIndex]]"],d=String.prototype.split,h=d.call(m,"-"),p=h.length;var f=new M;f["[[dataLocale]]"]=o;for(var v="-u",g=0,b=n.length;b>g;){var k=n[g],y=i[o],E=y[k],w=E[0],R="",N=Z;if(void 0!==h){var x=N.call(h,k);if(-1!==x)if(p>x+1&&h[x+1].length>2){var _=h[x+1],S=N.call(E,_);if(-1!==S)var w=_,R="-"+k+"-"+w}else{var S=N(E,"true");if(-1!==S)var w="true"}}if(G.call(a,"[["+k+"]]")){var C=a["[["+k+"]]"];-1!==N.call(E,C)&&C!==w&&(w=C,R="")}f["[["+k+"]]"]=w,v+=R,g++}if(v.length>2)var P=o.substring(0,u),L=o.substring(u),o=P+v+L;return f["[[locale]]"]=o,f}function o(e,t){for(var a=t.length,n=new O,i=0;a>i;){var r=t[i],s=String(r).replace(mt,""),c=l(e,s);void 0!==c&&et.call(n,r),i++}var o=Q.call(n);return o}function m(e,t){return o(e,t)}function u(e,t,a){if(void 0!==a){var a=new M(A(a)),n=a.localeMatcher;if(void 0!==n&&(n=String(n),"lookup"!==n&&"best fit"!==n))throw new RangeError('matcher should be "lookup" or "best fit"')}if(void 0===n||"best fit"===n)var i=m(e,t);else var i=o(e,t);for(var l in i)G.call(i,l)&&Y(i,l,{writable:!1,configurable:!1,value:i[l]});return Y(i,"length",{writable:!1}),i}function d(e,t,a,n,i){var l=e[t];if(void 0!==l){if(l="boolean"===a?Boolean(l):"string"===a?String(l):l,void 0!==n&&-1===Z.call(n,l))throw new RangeError("'"+l+"' is not an allowed value for `"+t+"`");return l}return i}function h(e,t,a,n,i){var l=e[t];if(void 0!==l){if(l=Number(l),isNaN(l)||a>l||l>n)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(l)}return i}function p(){var e=arguments[0],t=arguments[1];return this&&this!==$?f(A(this),e,t):new $.NumberFormat(e,t)}function f(e,t,a){var l=z(e),r=W();if(l["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");Y(e,"__getInternalProperties",{value:function(){return arguments[0]===lt?l:void 0}}),l["[[initializedIntlObject]]"]=!0;var s=i(t);a=void 0===a?{}:A(a);var o=new M,m=d(a,"localeMatcher","string",new O("lookup","best fit"),"best fit");o["[[localeMatcher]]"]=m;var u=it.NumberFormat["[[localeData]]"],p=c(it.NumberFormat["[[availableLocales]]"],s,o,it.NumberFormat["[[relevantExtensionKeys]]"],u);l["[[locale]]"]=p["[[locale]]"],l["[[numberingSystem]]"]=p["[[nu]]"],l["[[dataLocale]]"]=p["[[dataLocale]]"];var f=p["[[dataLocale]]"],b=d(a,"style","string",new O("decimal","percent","currency"),"decimal");l["[[style]]"]=b;var k=d(a,"currency","string");if(void 0!==k&&!n(k))throw new RangeError("'"+k+"' is not a valid currency code");if("currency"===b&&void 0===k)throw new TypeError("Currency code is required when style is currency");if("currency"===b){k=k.toUpperCase(),l["[[currency]]"]=k;var y=v(k)}var E=d(a,"currencyDisplay","string",new O("code","symbol","name"),"symbol");"currency"===b&&(l["[[currencyDisplay]]"]=E);var w=h(a,"minimumIntegerDigits",1,21,1);l["[[minimumIntegerDigits]]"]=w;var R="currency"===b?y:0,N=h(a,"minimumFractionDigits",0,20,R);l["[[minimumFractionDigits]]"]=N;var x="currency"===b?Math.max(N,y):"percent"===b?Math.max(N,0):Math.max(N,3),_=h(a,"maximumFractionDigits",N,20,x);l["[[maximumFractionDigits]]"]=_;var S=a.minimumSignificantDigits,C=a.maximumSignificantDigits;(void 0!==S||void 0!==C)&&(S=h(a,"minimumSignificantDigits",1,21,1),C=h(a,"maximumSignificantDigits",S,21,21),l["[[minimumSignificantDigits]]"]=S,l["[[maximumSignificantDigits]]"]=C);var P=d(a,"useGrouping","boolean",void 0,!0);l["[[useGrouping]]"]=P;var L=u[f],T=L.patterns,D=T[b];return l["[[positivePattern]]"]=D.positivePattern,l["[[negativePattern]]"]=D.negativePattern,l["[[boundFormat]]"]=void 0,l["[[initializedNumberFormat]]"]=!0,V&&(e.format=g.call(e)),r.exp.test(r.input),e}function v(e){return void 0!==dt[e]?dt[e]:2}function g(){var e=null!=this&&"object"==typeof this&&z(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(e){return b(this,Number(e))},a=nt.call(t,this);e["[[boundFormat]]"]=a}return e["[[boundFormat]]"]}function b(e,t){var a,n=W(),i=z(e),l=i["[[dataLocale]]"],r=i["[[numberingSystem]]"],s=it.NumberFormat["[[localeData]]"][l],c=s.symbols[r]||s.symbols.latn,o=!1;if(isFinite(t)===!1)isNaN(t)?a=c.nan:(a=c.infinity,0>t&&(o=!0));else{if(0>t&&(o=!0,t=-t),"percent"===i["[[style]]"]&&(t*=100),a=G.call(i,"[[minimumSignificantDigits]]")&&G.call(i,"[[maximumSignificantDigits]]")?k(t,i["[[minimumSignificantDigits]]"],i["[[maximumSignificantDigits]]"]):y(t,i["[[minimumIntegerDigits]]"],i["[[minimumFractionDigits]]"],i["[[maximumFractionDigits]]"]),ht[r]){var m=ht[i["[[numberingSystem]]"]];a=String(a).replace(/\d/g,function(e){return m[e]})}else a=String(a);if(a=a.replace(/\./g,c.decimal),i["[[useGrouping]]"]===!0){var u=a.split(c.decimal),d=u[0],h=s.patterns.primaryGroupSize||3,p=s.patterns.secondaryGroupSize||h;if(d.length>h){var f=new O,v=d.length-h,g=v%p,b=d.slice(0,g);for(b.length&&et.call(f,b);v>g;)et.call(f,d.slice(g,g+p)),g+=p;et.call(f,d.slice(v)),u[0]=tt.call(f,c.group)}a=tt.call(u,c.decimal)}}var E=i[o===!0?"[[negativePattern]]":"[[positivePattern]]"];if(E=E.replace("{number}",a),"currency"===i["[[style]]"]){var w,R=i["[[currency]]"],N=s.currencies[R];switch(i["[[currencyDisplay]]"]){case"symbol":w=N||R;break;default:case"code":case"name":w=R}E=E.replace("{currency}",w)}return n.exp.test(n.input),E}function k(e,t,a){var n=a;if(0===e)var i=tt.call(Array(n+1),"0"),l=0;else var l=T(Math.abs(e)),r=Math.round(Math.exp(Math.abs(l-n+1)*Math.LN10)),i=String(Math.round(0>l-n+1?e*r:e/r));if(l>=n)return i+tt.call(Array(l-n+1+1),"0");if(l===n-1)return i;if(l>=0?i=i.slice(0,l+1)+"."+i.slice(l+1):0>l&&(i="0."+tt.call(Array(-(l+1)+1),"0")+i),i.indexOf(".")>=0&&a>t){for(var s=a-t;s>0&&"0"===i.charAt(i.length-1);)i=i.slice(0,-1),s--;"."===i.charAt(i.length-1)&&(i=i.slice(0,-1))}return i}function y(e,t,a,n){var i,l=Number.prototype.toFixed.call(e,n),r=l.split(".")[0].length,s=n-a,c=(i=l.indexOf("e"))>-1?l.slice(i+1):0;for(c&&(l=l.slice(0,i).replace(".",""),l+=tt.call(Array(c-(l.length-1)+1),"0")+"."+tt.call(Array(n+1),"0"),r=l.length);s>0&&"0"===l.slice(-1);)l=l.slice(0,-1),s--;if("."===l.slice(-1)&&(l=l.slice(0,-1)),t>r)var o=tt.call(Array(t-r+1),"0");return(o?o:"")+l}function E(){var e=arguments[0],t=arguments[1];return this&&this!==$?w(A(this),e,t):new $.DateTimeFormat(e,t)}function w(e,t,a){var n=z(e),l=W();if(n["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");Y(e,"__getInternalProperties",{value:function(){return arguments[0]===lt?n:void 0}}),n["[[initializedIntlObject]]"]=!0;var r=i(t),a=R(a,"any","date"),s=new M;y=d(a,"localeMatcher","string",new O("lookup","best fit"),"best fit"),s["[[localeMatcher]]"]=y;var o=it.DateTimeFormat,m=o["[[localeData]]"],u=c(o["[[availableLocales]]"],r,s,o["[[relevantExtensionKeys]]"],m);n["[[locale]]"]=u["[[locale]]"],n["[[calendar]]"]=u["[[ca]]"],n["[[numberingSystem]]"]=u["[[nu]]"],n["[[dataLocale]]"]=u["[[dataLocale]]"];var h=u["[[dataLocale]]"],p=a.timeZone;if(void 0!==p&&(p=F(p),"UTC"!==p))throw new RangeError("timeZone is not supported.");n["[[timeZone]]"]=p,s=new M;for(var f in pt)if(G.call(pt,f)){var v=d(a,f,"string",pt[f]);s["[["+f+"]]"]=v}var g,b=m[h],k=b.formats,y=d(a,"formatMatcher","string",new O("basic","best fit"),"best fit");g="basic"===y?N(s,k):_(s,k);for(var f in pt)if(G.call(pt,f)&&G.call(g,f)){var E=g[f];n["[["+f+"]]"]=E}var w,x=d(a,"hour12","boolean");if(n["[[hour]]"])if(x=void 0===x?b.hour12:x,n["[[hour12]]"]=x,x===!0){var C=b.hourNo0;n["[[hourNo0]]"]=C,w=g.pattern12}else w=g.pattern;else w=g.pattern;return n["[[pattern]]"]=w,n["[[boundFormat]]"]=void 0,n["[[initializedDateTimeFormat]]"]=!0,V&&(e.format=S.call(e)),l.exp.test(l.input),e}function R(e,t,a){if(void 0===e)e=null;else{var n=A(e);e=new M;for(var i in n)e[i]=n[i]}var l=K,e=l(e),r=!0;return("date"===t||"any"===t)&&(void 0!==e.weekday||void 0!==e.year||void 0!==e.month||void 0!==e.day)&&(r=!1),("time"===t||"any"===t)&&(void 0!==e.hour||void 0!==e.minute||void 0!==e.second)&&(r=!1),!r||"date"!==a&&"all"!==a||(e.year=e.month=e.day="numeric"),!r||"time"!==a&&"all"!==a||(e.hour=e.minute=e.second="numeric"),e}function N(e,t){return x(e,t)}function x(e,t,a){for(var n,i=8,l=120,r=20,s=8,c=6,o=6,m=3,u=-1/0,d=0,h=t.length;h>d;){var p=t[d],f=0;for(var v in pt)if(G.call(pt,v)){var g=e["[["+v+"]]"],b=G.call(p,v)?p[v]:void 0;if(void 0===g&&void 0!==b)f-=r;else if(void 0!==g&&void 0===b)f-=l;else{var k=["2-digit","numeric","narrow","short","long"],y=Z.call(k,g),E=Z.call(k,b),w=Math.max(Math.min(E-y,2),-2);!a||("numeric"!==g&&"2-digit"!==g||"numeric"===b||"2-digit"===b)&&("numeric"===g||"2-digit"===g||"2-digit"!==b&&"numeric"!==b)||(f-=i),2===w?f-=c:1===w?f-=m:-1===w?f-=o:-2===w&&(f-=s)}}f>u&&(u=f,n=p),d++}return n}function _(e,t){return x(e,t,!0)}function S(){var e=null!=this&&"object"==typeof this&&z(this);if(!e||!e["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===e["[[boundFormat]]"]){var t=function(){var e=Number(0===arguments.length?Date.now():arguments[0]);return C(this,e)},a=nt.call(t,this);e["[[boundFormat]]"]=a}return e["[[boundFormat]]"]}function C(e,t){if(!isFinite(t))throw new RangeError("Invalid valid date passed to format");var a=e.__getInternalProperties(lt),n=W(),i=a["[[locale]]"],l=new $.NumberFormat([i],{useGrouping:!1}),r=new $.NumberFormat([i],{minimumIntegerDigits:2,useGrouping:!1}),s=P(t,a["[[calendar]]"],a["[[timeZone]]"]),c=a["[[pattern]]"],o=a["[[dataLocale]]"],m=it.DateTimeFormat["[[localeData]]"][o].calendars,u=a["[[calendar]]"];for(var d in pt)if(G.call(a,"[["+d+"]]")){var h,p,f=a["[["+d+"]]"],v=s["[["+d+"]]"];if("year"===d&&0>=v?v=1-v:"month"===d?v++:"hour"===d&&a["[[hour12]]"]===!0&&(v%=12,h=v!==s["[["+d+"]]"],0===v&&a["[[hourNo0]]"]===!0&&(v=12)),"numeric"===f)p=b(l,v);else if("2-digit"===f)p=b(r,v),p.length>2&&(p=p.slice(-2));else if(f in rt)switch(d){case"month":p=j(m,u,"months",f,s["[["+d+"]]"]);break;case"weekday":try{p=j(m,u,"days",f,s["[["+d+"]]"])}catch(g){throw new Error("Could not find weekday data for locale "+i)}break;case"timeZoneName":p="";break;default:p=s["[["+d+"]]"]}c=c.replace("{"+d+"}",p)}return a["[[hour12]]"]===!0&&(p=j(m,u,"dayPeriods",h?"pm":"am"),c=c.replace("{ampm}",p)),n.exp.test(n.input),c}function P(e,t,a){var n=new Date(e),i="get"+(a||"");return new M({"[[weekday]]":n[i+"Day"](),"[[era]]":+(n[i+"FullYear"]()>=0),"[[year]]":n[i+"FullYear"](),"[[month]]":n[i+"Month"](),"[[day]]":n[i+"Date"](),"[[hour]]":n[i+"Hours"](),"[[minute]]":n[i+"Minutes"](),"[[second]]":n[i+"Seconds"](),"[[inDST]]":!1})}function L(e,t){if(!e.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var a,n=[t],i=t.split("-");for(i.length>2&&4==i[1].length&&et.call(n,i[0]+"-"+i[2]);a=at.call(n);)et.call(it.NumberFormat["[[availableLocales]]"],a),it.NumberFormat["[[localeData]]"][a]=e.number,e.date&&(e.date.nu=e.number.nu,et.call(it.DateTimeFormat["[[availableLocales]]"],a),it.DateTimeFormat["[[localeData]]"][a]=e.date);void 0===I&&(I=t),st||(f($.NumberFormat.prototype),st=!0),e.date&&!ct&&(w($.DateTimeFormat.prototype),ct=!0)}function T(e){if("function"==typeof Math.log10)return Math.floor(Math.log10(e));var t=Math.round(Math.log(e)*Math.LOG10E);return t-(Number("1e"+t)>e)}function D(e){if(!G.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var t=W(),a=arguments[1],n=this["[[availableLocales]]"],l=i(e);return t.exp.test(t.input),u(n,l,a)}function j(e,t,a,n,i){var l=e[t]&&e[t][a]?e[t][a]:e.gregory[a],r={narrow:["short","long"],"short":["long","narrow"],"long":["short","narrow"]},s=G.call(l,n)?l[n]:G.call(l,r[n][0])?l[r[n][0]]:l[r[n][1]];return null!=i?s[i]:s}function M(e){for(var t in e)(e instanceof M||G.call(e,t))&&Y(this,t,{value:e[t],enumerable:!0,writable:!0,configurable:!0})}function O(){Y(this,"length",{writable:!0,value:0}),arguments.length&&et.apply(this,Q.call(arguments))}function W(){for(var e=/[.?*+^$[\]\\(){}|-]/g,t=RegExp.lastMatch,a=RegExp.multiline?"m":"",n={input:RegExp.input},i=new O,l=!1,r={},s=1;9>=s;s++)l=(r["$"+s]=RegExp["$"+s])||l;if(t=t.replace(e,"\\$&"),l)for(var s=1;9>=s;s++){var c=r["$"+s];c?(c=c.replace(e,"\\$&"),t=t.replace(c,"("+c+")")):t="()"+t,et.call(i,t.slice(0,t.indexOf("(")+1)),t=t.slice(t.indexOf("(")+1)}return n.exp=new RegExp(tt.call(i,"")+t,a),n}function F(e){for(var t=e.length;t--;){var a=e.charAt(t);a>="a"&&"z">=a&&(e=e.slice(0,t)+a.toUpperCase()+e.slice(t+1))}return e}function A(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return Object(e)}function z(e){return G.call(e,"__getInternalProperties")?e.__getInternalProperties(lt):K(null)}var I,q,B,U,H,$={},J=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return!1}}(),V=!J&&!Object.prototype.__defineGetter__,G=Object.prototype.hasOwnProperty,Y=J?Object.defineProperty:function(e,t,a){"get"in a&&e.__defineGetter__?e.__defineGetter__(t,a.get):(!G.call(e,t)||"value"in a)&&(e[t]=a.value)},Z=Array.prototype.indexOf||function(e){var t=this;if(!t.length)return-1;for(var a=arguments[1]||0,n=t.length;n>a;a++)if(t[a]===e)return a;return-1},K=Object.create||function(e,t){function a(){}var n;a.prototype=e,n=new a;for(var i in t)G.call(t,i)&&Y(n,i,t[i]);return n},Q=Array.prototype.slice,X=Array.prototype.concat,et=Array.prototype.push,tt=Array.prototype.join,at=Array.prototype.shift,nt=(Array.prototype.unshift,Function.prototype.bind||function(e){var t=this,a=Q.call(arguments,1);return 1===t.length?function(){return t.apply(e,X.call(a,Q.call(arguments)))}:function(){return t.apply(e,X.call(a,Q.call(arguments)))}}),it=K(null),lt=Math.random(),rt=K(null,{narrow:{},"short":{},"long":{}}),st=!1,ct=!1,ot=/^[A-Z]{3}$/,mt=/-u(?:-[0-9a-z]{2,8})+/gi,ut={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97","in":"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},dt={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:0,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};!function(){var e="[a-z]{3}(?:-[a-z]{3}){0,2}",t="(?:[a-z]{2,3}(?:-"+e+")?|[a-z]{4}|[a-z]{5,8})",a="[a-z]{4}",n="(?:[a-z]{2}|\\d{3})",i="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",l="[0-9a-wy-z]",r=l+"(?:-[a-z0-9]{2,8})+",s="x(?:-[a-z0-9]{1,8})+",c="(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))",o="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))",m="(?:"+c+"|"+o+")",u=t+"(?:-"+a+")?(?:-"+n+")?(?:-"+i+")*(?:-"+r+")*(?:-"+s+")?";q=RegExp("^(?:"+u+"|"+s+"|"+m+")$","i"),U=RegExp("^(?!x).*?-("+i+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),H=RegExp("^(?!x).*?-("+l+")-(?:\\w+-(?!x-))*\\1\\b","i"),B=RegExp("-"+r,"ig")}(),Y($,"NumberFormat",{configurable:!0,writable:!0,value:p}),Y($.NumberFormat,"prototype",{writable:!1}),it.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},Y($.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:nt.call(D,it.NumberFormat)}),Y($.NumberFormat.prototype,"format",{configurable:!0,get:g});var ht={arab:["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"],arabext:["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],bali:["᭐","᭑","᭒","᭓","᭔","᭕","᭖","᭗","᭘","᭙"],beng:["০","১","২","৩","৪","৫","৬","৭","৮","৯"],deva:["०","१","२","३","४","५","६","७","८","९"],fullwide:["０","１","２","３","４","５","６","７","８","９"],gujr:["૦","૧","૨","૩","૪","૫","૬","૭","૮","૯"],guru:["੦","੧","੨","੩","੪","੫","੬","੭","੮","੯"],hanidec:["〇","一","二","三","四","五","六","七","八","九"],khmr:["០","១","២","៣","៤","៥","៦","៧","៨","៩"],knda:["೦","೧","೨","೩","೪","೫","೬","೭","೮","೯"],laoo:["໐","໑","໒","໓","໔","໕","໖","໗","໘","໙"],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["᥆","᥇","᥈","᥉","᥊","᥋","᥌","᥍","᥎","᥏"],mlym:["൦","൧","൨","൩","൪","൫","൬","൭","൮","൯"],mong:["᠐","᠑","᠒","᠓","᠔","᠕","᠖","᠗","᠘","᠙"],mymr:["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],orya:["୦","୧","୨","୩","୪","୫","୬","୭","୮","୯"],tamldec:["௦","௧","௨","௩","௪","௫","௬","௭","௮","௯"],telu:["౦","౧","౨","౩","౪","౫","౬","౭","౮","౯"],thai:["๐","๑","๒","๓","๔","๕","๖","๗","๘","๙"],tibt:["༠","༡","༢","༣","༤","༥","༦","༧","༨","༩"]};Y($.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var e,t=new M,a=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],n=null!=this&&"object"==typeof this&&z(this);if(!n||!n["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var i=0,l=a.length;l>i;i++)G.call(n,e="[["+a[i]+"]]")&&(t[a[i]]={value:n[e],writable:!0,configurable:!0,enumerable:!0});return K({},t)}}),Y($,"DateTimeFormat",{configurable:!0,writable:!0,value:E}),Y(E,"prototype",{writable:!1});var pt={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};it.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},Y($.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:nt.call(D,it.DateTimeFormat)}),Y($.DateTimeFormat.prototype,"format",{configurable:!0,get:S}),Y($.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var e,t=new M,a=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],n=null!=this&&"object"==typeof this&&z(this);if(!n||!n["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var i=0,l=a.length;l>i;i++)G.call(n,e="[["+a[i]+"]]")&&(t[a[i]]={value:n[e],writable:!0,configurable:!0,enumerable:!0});return K({},t)}});var ft=$.__localeSensitiveProtos={Number:{},Date:{}};return ft.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return b(new p(arguments[0],arguments[1]),this)},ft.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],a=arguments[1],a=R(a,"any","all"),n=new E(t,a);return C(n,e)},ft.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],a=arguments[1],a=R(a,"date","date"),n=new E(t,a);return C(n,e)},ft.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var e=+this;if(isNaN(e))return"Invalid Date";var t=arguments[0],a=arguments[1],a=R(a,"time","time"),n=new E(t,a);return C(n,e)},Y($,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){Y(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:ft.Number.toLocaleString});for(var e in ft.Date)G.call(ft.Date,e)&&Y(Date.prototype,e,{writable:!0,configurable:!0,value:ft.Date[e]})}}),Y($,"__addLocaleData",{value:function(t){if(!e(t.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");L(t,t.locale)}}),M.prototype=K(null),O.prototype=K(null),$})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(){if(Function.prototype.bind||(Function.prototype.bind=function(e){"use strict";if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),a=this,n=function(){},i=function(){return a.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i}),function(){"use strict";var e=Object.prototype,t=e.__defineGetter__,a=e.__defineSetter__,n=e.__lookupGetter__,i=e.__lookupSetter__,l=e.hasOwnProperty;t&&a&&n&&i&&(Object.defineProperty||(Object.defineProperty=function(e,r,s){if(arguments.length<3)throw new TypeError("Arguments not optional");if(r+="",l.call(s,"value")&&(!n.call(e,r)&&!i.call(e,r)&&(e[r]=s.value),l.call(s,"get")||l.call(s,"set")))throw new TypeError("Cannot specify an accessor and a value");if(!(s.writable&&s.enumerable&&s.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return s.get&&t.call(e,r,s.get),s.set&&a.call(e,r,s.set),e}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if(arguments.length<2)throw new TypeError("Arguments not optional.");t+="";var a={configurable:!0,enumerable:!0,writable:!0},r=n.call(e,t),s=i.call(e,t);return l.call(e,t)?r||s?(delete a.writable,a.get=a.set=void 0,r&&(a.get=r),s&&(a.set=s),a):(a.value=e[t],a):a}),Object.defineProperties||(Object.defineProperties=function(e,t){var a;for(a in t)l.call(t,a)&&Object.defineProperty(e,a,t[a])}))}(),!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var e={enumerable:!0,get:function(){"use strict";var e,t,a,n,i,l,r=this,s=this.attributes,c=s.length,o=function(e){return e.charAt(1).toUpperCase()},m=function(){return this},u=function(e,t){return"undefined"!=typeof t?this.setAttribute(e,t):this.removeAttribute(e)};try{({}).__defineGetter__("test",function(){}),t={}}catch(d){t=document.createElement("div")}for(e=0;c>e;e++)if(l=s[e],l&&l.name&&/^data-\w[\w\-]*$/.test(l.name)){a=l.value,n=l.name,i=n.substr(5).replace(/-./g,o);try{Object.defineProperty(t,i,{enumerable:this.enumerable,get:m.bind(a||""),set:u.bind(r,n)})}catch(h){t[i]=a}}return t}};try{Object.defineProperty(Element.prototype,"dataset",e)}catch(t){e.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",e)}}Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t,a=Object(e),n=!1,i=1;i<arguments.length;i++){var l=arguments[i];if(void 0!==l&&null!==l){for(var r=Object.keys(Object(l)),s=0,c=r.length;c>s;s++){var o=r[s];try{var m=Object.getOwnPropertyDescriptor(l,o);void 0!==m&&m.enumerable&&(a[o]=l[o])}catch(u){n||(n=!0,t=u)}}if(n)throw t}}return a}})},{}],4:[function(e,t){"use strict";var a=e("./elements/CAWImageUpload.jsx"),n=e("./elements/CAWThemeSelect.jsx"),i=e("./elements/CAWMapBuilder.jsx"),l=e("./elements/CAWDateSelect.jsx"),r=e("./elements/CAWWardSelect.jsx"),s=e("./elements/CAWAccessibleSelect.jsx"),c=e("./elements/CAWTeamBuilder.jsx"),o=e("./functions/translate.js"),m=e("./functions/helpers.jsx"),u=React.createClass({displayName:"CreateWalk",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var e=this.props.data,t={title:"",shortdescription:"",longdescription:"","accessible-info":"","accessible-transit":"","accessible-parking":"","accessible-find":"",gmap:{markers:[],route:[]},team:[{user_id:-1,type:"you","name-first":"","name-last":"",role:"walk-leader",primary:"on",bio:"",twitter:"",facebook:"",website:"",email:"",phone:""}],time:{type:"",slots:[]},thumbnails:[],wards:"",checkboxes:{},notifications:[],url:this.props.url};
if(e){e.gmap&&!Array.isArray(e.gmap.markers)&&(e.gmap.markers=m.objectToArray(e.gmap.markers)),e.gmap&&!Array.isArray(e.gmap.route)&&(e.gmap.route=m.objectToArray(e.gmap.route)),e.time&&!Array.isArray(e.time.slots)&&(e.time.slots=m.objectToArray(e.time.slots));for(var a in e)e[a]===!1&&(e[a]="");if(e.team=e.team||[],0===e.team.length){var n=this.props.user;e.team=[{user_id:n.id,type:"you","name-first":n.firstName,"name-last":n.lastName,role:"walk-leader",primary:"on",bio:n.bio,twitter:n.twitter,facebook:n.facebook,website:n.website,email:n.email,phone:""}]}Object.assign(t,e)}return t},saveWalk:function(e,t){var a=this.state.notifications.slice(),n=function(){var e=this.state.notifications.slice();this.setState({notifications:e.slice(1)})}.bind(this);e=e||{},a.push({type:"info",name:"Saving walk"}),this.setState({gmap:this.refs.mapBuilder.getStateSimple(),notifications:a},function(){$.ajax({url:this.state.url,type:e.publish?"PUT":"POST",data:{json:JSON.stringify(this.state)},dataType:"json",success:function(e){var a=this.state.notifications.slice();a.push({type:"success",name:"Walk saved"}),this.setState({notifications:a,url:e.url||this.state.url},function(){t&&t instanceof Function&&t.call(this)}),setTimeout(n,1200)}.bind(this),error:function(e,t,a){var i=this.state.notifications.slice();i.push({type:"danger",name:"Walk failed to save",message:"Keep this window open and contact Jane's Walk for assistance"}),this.setState({notifications:i}),setTimeout(n,6e3),console.error(this.url,t,a.toString())}.bind(this)})}.bind(this)),setTimeout(n,1200)},handleNext:function(){var e=$("#progress-panel > .nav > li.active + li > a");window.scrollTo(0,0),e.length?(this.saveWalk(),e.trigger("click")):$(this.refs.publish.getDOMNode()).trigger("click")},handleSave:function(){this.saveWalk()},handlePublish:function(){this.saveWalk({publish:!0},function(){console.log("Walk published")})},handlePreview:function(){var e=this;this.saveWalk({},function(){e.setState({preview:!0})})},componentWillMount:function(){var e=this.props.locale,t=this;e.translation&&$.ajax({url:e.translation,dataType:"json",success:function(e){try{t.state.i18n.constructor(e.translations[""]),t.setState({})}catch(a){console.error("Failed to load i18n translations JSON: "+a.stack)}}}),this.setState({i18n:new o})},render:function(){{var e=this.state.i18n,t=e.translate.bind(e);e.translatePlural.bind(e)}return React.createElement("main",{id:"create-walk"},React.createElement("section",null,React.createElement("nav",{id:"progress-panel"},React.createElement("ul",{className:"nav nav-tabs"},React.createElement("li",{className:"active"},React.createElement("a",{"data-toggle":"tab",className:"description",href:"#description"},React.createElement("i",{className:"fa fa-list-ol"}),t("Describe Your Walk"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"route",href:"#route"},React.createElement("i",{className:"fa fa-map-marker"}),t("Share Your Route"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"time-and-date",href:"#time-and-date"},React.createElement("i",{className:"fa fa-calendar"}),t("Set the Time & Date"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"accessibility",href:"#accessibility"},React.createElement("i",{className:"fa fa-flag"}),t("Make it Accessible"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"team",href:"#team"},React.createElement("i",{className:"fa fa-users"}),t("Build Your Team")))),React.createElement("section",{id:"button-group"},React.createElement("button",{className:"btn btn-info btn-preview",id:"preview-walk",title:"Preview what you have so far.",onClick:this.handlePreview},t("Preview Walk")),React.createElement("button",{className:"btn btn-info btn-submit",id:"btn-submit",title:"Publishing will make your visible to all.",onClick:function(){this.setState({publish:!0})}.bind(this),ref:"publish"},t("Publish Walk")),React.createElement("button",{className:"btn btn-info save",title:"Save",id:"btn-save",onClick:this.handleSave},t("Save")))),React.createElement("div",{id:"main-panel",role:"main"},React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"tab-pane active",id:"description"},React.createElement("div",{className:"walk-submit lead clearfix"},React.createElement("div",{className:"col-md-4"},React.createElement("img",{id:"convo-marker",src:CCM_THEME_PATH+"/img/jw-intro-graphic.svg",alt:"Jane's Walks are walking conversations."})),React.createElement("div",{className:"col-md-8"},React.createElement("h1",null,t("Hey there, %s!",this.props.user.firstName)),React.createElement("p",null,t("Jane’s Walks are walking conversations about neighbourhoods. You can return to this form at any time, so there's no need to finish everything at once.")))),React.createElement("div",{className:"page-header","data-section":"description"},React.createElement("h1",null,t("Describe Your Walk"))),React.createElement("form",null,React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"title"},t("Walk Title")),React.createElement("div",{className:"alert alert-info"},t("Something short and memorable.")),React.createElement("input",{type:"text",valueLink:this.linkState("title")})))),React.createElement(a,{i18n:e,valueLink:this.linkState("thumbnails"),valt:this.props.valt}),React.createElement("form",null,React.createElement("hr",null),React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"shortdescription"},t("Your Walk in a Nutshell")),React.createElement("div",{className:"alert alert-info"},t("Build intrigue! This is what people see when browsing our walk listings.")),React.createElement("textarea",{id:"shortdescription",name:"shortdescription",rows:"6",maxLength:"140",valueLink:this.linkState("shortdescription"),required:!0})),React.createElement("hr",null),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"longdescription",id:"longwalkdescription"},t("Walk Description")),React.createElement("div",{className:"alert alert-info"},t("Help jump start the conversation on your walk by giving readers an idea of the discussions you'll be having on the walk together. We suggest including a couple of questions to get people thinking about how they can contribute to the dialog on the walk. To keep this engaging, we recommend keeping your description to 200 words.")),React.createElement("textarea",{id:"longdescription",name:"longdescription",rows:"14",valueLink:this.linkState("longdescription")}))),React.createElement(n,{i18n:e,valueLink:this.linkState("checkboxes")}),React.createElement(r,{i18n:e,wards:this.props.city.wards,valueLink:this.linkState("wards")}),React.createElement("hr",null))),React.createElement(i,{ref:"mapBuilder",i18n:e,valueLink:this.linkState("gmap"),city:this.props.city}),React.createElement(l,{i18n:e,valueLink:this.linkState("time")}),React.createElement("div",{className:"tab-pane",id:"accessibility"},React.createElement("div",{className:"page-header","data-section":"accessibility"},React.createElement("h1",null,t("Make it Accessible"))),React.createElement("div",{className:"item"},React.createElement(s,{i18n:e,valueLink:this.linkState("checkboxes")})),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,t("What else do people need to know about the accessibility of this walk?")," (",t("Optional"),")"),React.createElement("textarea",{name:"accessible-info",rows:"3",maxLength:"140",valueLink:this.linkState("accessible-info")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{id:"transit"},t("How can someone get to the meeting spot by public transit?")," (",t("Optional"),")"),React.createElement("div",{className:"alert alert-info"},t("Nearest subway stop, closest bus or streetcar lines, etc.")),React.createElement("textarea",{rows:"3",name:"accessible-transit",valueLink:this.linkState("accessible-transit")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,t("Where are the nearest places to park?")," (",t("Optional"),")"),React.createElement("textarea",{rows:"3",name:"accessible-parking",valueLink:this.linkState("accessible-parking")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{className:"required-legend"},t("How will people find you?")),React.createElement("div",{className:"alert alert-info"},t("Perhaps you will be holding a sign, wearing a special t-shirt or holding up an object that relates to the theme of your walk. Whatever it is, let people know how to identify you.")),React.createElement("textarea",{rows:"3",name:"accessible-find",valueLink:this.linkState("accessible-find")}))),React.createElement("hr",null),React.createElement("br",null)),React.createElement(c,{i18n:e,valueLink:this.linkState("team")})),React.createElement("button",{type:"button",onClick:this.handleNext,className:"btn"},"Next")),React.createElement("aside",{id:"tips-panel",role:"complementary"},React.createElement("div",{className:"popover right",id:"city-organizer",style:{display:"block"}},React.createElement("h3",{className:"popover-title","data-toggle":"collapse","data-target":"#popover-content"},React.createElement("i",{className:"fa fa-envelope"}),t("Contact City Organizer for help")),React.createElement("div",{className:"popover-content collapse in",id:"popover-content"},React.createElement("div",{className:"u-avatar",style:{backgroundImage:"url("+this.props.city.cityOrganizer.photo+")"}}),React.createElement("p",null,t("Hi! I'm %s, the City Organizer for Jane's Walk %s. I'm here to help, so if you have any questions, please",this.props.city.cityOrganizer.firstName,this.props.city.name)," ",React.createElement("strong",null,React.createElement("a",{href:"mailto:"+this.props.city.cityOrganizer.email},t("email me"),"!"))))))),this.state.publish?React.createElement(h,{i18n:e,url:this.state.url,saveWalk:this.saveWalk.bind(this),close:this.setState.bind(this,{publish:!1})}):null,this.state.preview?React.createElement(d,{i18n:e,url:this.state.url,close:this.setState.bind(this,{preview:!1})}):null,React.createElement("aside",{id:"notifications"},this.state.notifications.map(function(e){return React.createElement("div",{key:e.message,className:"alert alert-"+e.type},React.createElement("strong",null,e.name||"",": "),e.message||"")})))}}),d=React.createClass({displayName:"WalkPreview",componentDidMount:function(){var e=this;$(this.getDOMNode()).modal(),$(this.getDOMNode()).bind("hidden.bs.modal",function(){e.props.close()})},render:function(){var e=this.props.i18n,t=e.translate.bind(e);return React.createElement("dialog",{id:"preview-modal"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","aria-hidden":"true","data-dismiss":"modal"},"×"),React.createElement("h3",null,t("Preview of your Walk"))),React.createElement("div",{className:"modal-body"},React.createElement("iframe",{src:this.props.url,frameBorder:"0"})))))}}),h=React.createClass({displayName:"WalkPublish",componentDidMount:function(){var e=this;$(this.getDOMNode()).modal(),$(this.getDOMNode()).bind("hidden.bs.modal",function(){e.props.close()})},render:function(){var e=this.props.i18n,t=e.translate.bind(e),a=function(){this.props.close()}.bind(this),n=function(){this.props.saveWalk({publish:!0},function(){window.location=this.state.url})}.bind(this);return React.createElement("dialog",{id:"publish-warning"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"×"),React.createElement("h3",null,t("Okay, You're Ready to Publish"))),React.createElement("div",{className:"modal-body"},React.createElement("p",null,t("Just one more thing! Once you hit publish your walk will be live on Jane's Walk right away. You can return at any time to make changes."))),React.createElement("footer",null,React.createElement("div",{className:"pull-left"},React.createElement("a",{className:"walkthrough close","data-dismiss":"modal",onClick:a}," ",t("Bring me back to edit"))),React.createElement("a",null,React.createElement("button",{className:"btn btn-primary walkthrough","data-step":"publish-confirmation",onClick:n},t("Publish")))))))}});t.exports=u},{"./elements/CAWAccessibleSelect.jsx":8,"./elements/CAWDateSelect.jsx":9,"./elements/CAWImageUpload.jsx":10,"./elements/CAWMapBuilder.jsx":11,"./elements/CAWTeamBuilder.jsx":12,"./elements/CAWThemeSelect.jsx":13,"./elements/CAWWardSelect.jsx":14,"./functions/helpers.jsx":16,"./functions/translate.js":18}],5:[function(e,t){"use strict";var a=function(e){this._shareObj=e,this._shareObj.method="feed"};Object.defineProperties(a.prototype,{_shareObj:{value:null,writable:!0},show:{value:function(e,t){FB.ui(this._shareObj,function(a){void 0!==a&&(null===a?e&&e():t&&t())})}}}),t.exports=a},{}],6:[function(e,t){"use strict";var a=e("./View.jsx"),n=function(e){a.call(this,e),this._addNavEvents(),this._addOverlayCloseEvent()};n.prototype=Object.create(a.prototype,{_addOverlayCloseEvent:{value:function(){var e=this;this._element.find(".o-background").click(function(){e._element.find(".overlay").hide()}),this._element.find("a.closeModalCta").click(function(t){t.preventDefault(),e._element.find(".overlay").hide()})}},_addNavEvents:{value:function(){this._element.find("a.search-open").click(function(){$("html, body").animate({scrollTop:0},300),$("body > header").addClass("dropped")}),this._element.find("a.search-close").click(function(){$("body > header").removeClass("dropped")})}},_makeGaCall:{value:function(e){_gaq.push(e)}},trackCustomVar:{value:function(e,t,a,n){var i=["_setCustomVar",e,t,a,n];this._makeGaCall(i)}},trackEvent:{value:function(e,t,a,n,i){var l=["_trackEvent"];void 0!==e&&l.push(e),void 0!==t&&l.push(t),void 0!==a&&l.push(a),void 0!==n&&l.push(n),this._makeGaCall(l,i)}},trackView:{value:function(e){var t=["_trackPageview",e];this._makeGaCall(t)}}}),t.exports=n},{"./View.jsx":7}],7:[function(e,t){"use strict";e("../shims.js");var a=function(e){this._element=e};Object.defineProperties(a.prototype,{_element:{value:null,writable:!0,configurable:!0},getElement:{value:function(){return this._element}}}),t.exports=a},{"../shims.js":3}],8:[function(e,t){var a=e("../functions/mixins.jsx"),n=React.createClass({displayName:"AccessibleSelect",mixins:[a.linkedParentState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("fieldset",null,React.createElement("legend",{className:"required-legend"},e("How accessible is this walk?")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-familyfriendly")}),e("Family friendly")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-wheelchair")}),e("Wheelchair accessible")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-dogs")}),e("Dogs welcome")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-strollers")}),e("Strollers welcome")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-bicycles")}),e("Bicycles welcome")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-steephills")}),e("Steep hills"))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-uneven")}),e("Wear sensible shoes (uneven terrain)")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-busy")}),e("Busy sidewalks")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-bicyclesonly")}),e("Bicycles only")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-lowlight")}),e("Low light or nighttime")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("accessible-seniors")}),e("Senior Friendly")))))}});t.exports=n},{"../functions/mixins.jsx":17}],9:[function(e,t){var a=React.createClass({displayName:"DateSelect",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){var e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+7,11,0)),a=36e5;return{start:t,duration:a}},setDay:function(e){var t=this.state.start;t.setUTCFullYear(e.getUTCFullYear()),t.setUTCMonth(e.getUTCMonth()),t.setUTCDate(e.getUTCDate()),this.refs.timePicker.setStartTimes(t),this.setState({start:t})},setTime:function(e){var t=this.state.start;t.setUTCHours(e.getUTCHours()),t.setUTCMinutes(e.getUTCMinutes()),this.setState({start:t})},linkTime:function(){var e=this;return{value:e.state.start.getTime(),requestChange:function(t){e.setState({start:new Date(Number(t))})}}},addDate:function(){var e=this.props.valueLink,t=e.value||{},a=(t.slots||[]).slice(),n=this.state.start.getTime(),i=n+this.state.duration;a.push([n/1e3,i/1e3]),t.slots=a,e.requestChange(t)},render:function(){var e=this.props.valueLink,t=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"tab-pane",id:"time-and-date"},React.createElement("div",{className:"tab-content",id:"walkduration"},React.createElement("div",{className:"tab-pane hide",id:"time-and-date-select"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,t("Set the Time and Date"))),React.createElement("legend",null,t("Pick one of the following:")),React.createElement("div",{className:"row"},React.createElement("ul",{className:"thumbnails",id:"block-select"},React.createElement("li",null,React.createElement("a",{href:"#time-and-date-all","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-full.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,t("By Request"))),React.createElement("p",null,t("Highlight times that you're available to lead the walk, or leave your availability open. People will be asked to contact you to set up a walk.")))))),React.createElement("li",null,React.createElement("a",{href:"#time-and-date-set","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-some.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,t("Pick Your Date"))),React.createElement("p",null,t("Set specific dates and times that this walk is happening."))))))))),React.createElement("div",{className:"tab-pane active",id:"time-and-date-set"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,t("Time and Date")),React.createElement("p",{className:"lead"},t("Select the date and time your walk is happening."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(n,{setDay:this.setDay,defaultDate:this.state.start})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("h4",{className:"date-indicate-set"},React.createElement("small",null,t("Date selected"),":"),this.state.start.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",timeZone:"UTC"})),React.createElement("hr",null),React.createElement(i,{ref:"timePicker",i18n:this.props.i18n,valueLinkDuration:this.linkState("duration"),valueLinkStart:this.linkTime()}),React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-set",onClick:this.addDate},t("Add Date")))))),React.createElement("br",null),React.createElement(l,{i18n:this.props.i18n,valueLink:e}),React.createElement("hr",null)),React.createElement("div",{className:"tab-pane hide",id:"time-and-date-all"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,t("Time and Date")),React.createElement("p",{className:"lead"},t("Your availability will be visible to people on your walk page and they’ll be able to send you a walk request."))),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",name:"open"}),t("Leave my availability open. Allow people to contact you to set up a walk.")),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"date-picker"})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("div",{className:"date-select-group"},React.createElement("small",null,t("Date selected"),":"),React.createElement("h4",{className:"date-indicate-all"}),React.createElement("hr",null)),React.createElement("label",{htmlFor:"walk-duration"},t("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",defaultValue:"1 Hour, 30 Minutes"},React.createElement("option",{value:"30 Minutes"},"30 Minutes"),React.createElement("option",{value:"1 Hour"},"1 Hour"),React.createElement("option",{value:"1 Hour, 30 Minutes"},"1 Hour, 30 Minutes"),React.createElement("option",{value:"2 Hours"},"2 Hours"),React.createElement("option",{value:"2 Hours, 30 Minutes"},"2 Hours, 30 Minutes"),React.createElement("option",{value:"3 Hours"},"3 Hours"),React.createElement("option",{value:"3 Hours, 30 Minutes"},"3 Hours, 30 Minutes")),React.createElement("div",{className:"date-select-group"},React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-all",onClick:this.addDate},t("Add Date"))))))),React.createElement("br",null),React.createElement(r,null),React.createElement("hr",null))))}}),n=React.createClass({displayName:"DatePicker",componentDidMount:function(){$(this.getDOMNode()).datepicker({defaultDate:this.props.defaultDate,onSelect:function(e){this.props.setDay(new Date(e))}.bind(this)})},render:function(){return React.createElement("div",{className:"date-picker"})}}),i=React.createClass({displayName:"TimePicker",getInitialState:function(){return{startTimes:[]}},setStartTimes:function(e,t){if(this.state.start!==e){var a=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",timeZone:"UTC"}),n=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()],i=Date.UTC.apply(this,n),l=Date.UTC.apply(this,n.concat([23,30])),r=[];t=t||18e5;for(var s=i;l>=s;s+=t)r.push({asMs:s,asString:a.format(s)});this.setState({start:e,startTimes:r})}},componentWillUpdate:function(){},componentWillMount:function(){this.componentWillUpdate();var e=new Date(this.props.valueLinkStart.value);this.setStartTimes(e)},render:function(){var e=this.props.valueLinkDuration,t=e.requestChange,a=this.props.valueLinkStart,n=this.props.i18n.translate.bind(this.props.i18n);return e.requestChange=function(e){t(Number(e))},React.createElement("div",{className:"time-picker"},React.createElement("label",{htmlFor:"walk-time"},n("Start Time"),":"),React.createElement("select",{name:"start",id:"walk-start",valueLink:a},this.state.startTimes.map(function(e,t){return React.createElement("option",{key:"walk-start"+t,value:e.asMs},e.asString)})),React.createElement("label",{htmlFor:"walk-time"},n("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",valueLink:e},React.createElement("option",{value:18e5},"30 Minutes"),React.createElement("option",{value:36e5},"1 Hour"),React.createElement("option",{value:54e5},"1 Hour, 30 Minutes"),React.createElement("option",{value:72e5},"2 Hours"),React.createElement("option",{value:9e6},"2 Hours, 30 Minutes"),React.createElement("option",{value:108e5},"3 Hours"),React.createElement("option",{value:126e5},"3 Hours, 30 Minutes")))}}),l=React.createClass({displayName:"TimeSetTable",removeSlot:function(e){var t=this.props.valueLink,a=t.value,n=(a.slots||[]).slice();n.splice(e,1),a.slots=n,t.requestChange(a)},render:function(){var e=this.props.valueLink.value.slots||[],t=this.props.i18n.translate.bind(this.props.i18n),a=this.props.i18n.translatePlural.bind(this.props.i18n),n=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),i=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",timeZone:"UTC"});return React.createElement("table",{className:"table table-bordered table-hover",id:"date-list-all"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,t("Date")),React.createElement("th",null,t("Start Time")),React.createElement("th",null,t("Duration")),React.createElement("th",null))),React.createElement("tbody",null,e.map(function(e,l){var r=new Date(1e3*e[0]),s=new Date(1e3*(e[1]-e[0])),c=s.getUTCHours(),o=s.getUTCMinutes(),m=[];return c&&m.push(a("%d Hour","%d Hours",c)),o&&m.push(a("%d Minute","%d Minutes",o)),React.createElement("tr",{key:l},React.createElement("td",null,n.format(r)),React.createElement("td",null,i.format(r)),React.createElement("td",null,m.join(", ")),React.createElement("td",null,React.createElement("a",{onClick:this.removeSlot.bind(this,l)},React.createElement("i",{className:"fa fa-times-circle-o"})," ",t("Remove"))))}.bind(this))))}}),r=React.createClass({displayName:"TimeOpenTable",render:function(){return React.createElement("table",null)}});t.exports=a},{}],10:[function(e,t){var a=React.createClass({displayName:"ImageUpload",removeImage:function(e){var t=this.props.valueLink.value;t.splice(e,1),this.props.valueLink.requestChange(t)},handleUpload:function(e){var t=new FormData,a=this;e.currentTarget.files&&(t.append("Filedata",e.currentTarget.files[0]),t.append("ccm_token",this.props.valt),$.ajax({url:CCM_TOOLS_PATH+"/files/importers/quick",type:"POST",cache:!1,data:t,processData:!1,contentType:!1,success:function(e){var t=a.props.valueLink.value;t.push(e),a.props.valueLink.requestChange(t)},error:function(){}}))},render:function(){var e=this.props.valueLink.value,t=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("form",{className:"upload-image"},React.createElement("label",{htmlFor:"walkphotos",id:"photo-tip"},t("Upload a photo that best represents your walk.")),e.map(function(e,t){var a=(e.url||""+t).replace(/^.*[\\\/]/,"");return React.createElement("div",{key:a,className:"thumbnail",style:{backgroundImage:"url("+e.url+")"}},React.createElement("a",{className:"remove",onClick:this.removeImage.bind(this,t)},React.createElement("i",{className:"fa fa-times-circle"})))},this),e.length<1?React.createElement("div",{className:"thumbnail fileupload"},React.createElement("input",{className:"ccm-al-upload-single-file",type:"file",onChange:this.handleUpload}),React.createElement("i",{className:"fa fa-camera-retro fa-5x"}),React.createElement("span",{className:"fileupload-new"},t("Click to upload an image"))):null)}});t.exports=a},{}],11:[function(e,t){"use strict";var a=(e("../functions/helpers.jsx"),React.createClass({displayName:"MapBuilder",getDefaultProps:function(){return{initialZoom:15}},getInitialState:function(){return{mode:{},map:null,markers:new google.maps.MVCArray,route:null,infowindow:new google.maps.InfoWindow}},componentDidMount:function(){var e=this,t=this.props.valueLink,a=this.refs.gmap.getDOMNode(),n={center:new google.maps.LatLng(this.props.city.lat,this.props.city.lng),zoom:this.props.initialZoom,scrollwheel:!1,rotateControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE]}},i=new google.maps.Map(a,n),l=this.state.markers,r=this.state.route;this.setState({map:i},function(){t.value?(t.value.markers.forEach(function(e){l.push(this.buildMarker(new google.maps.LatLng(e.lat,e.lng),{title:e.title,description:e.description}))}.bind(this)),r=this.buildRoute(t.value.route)):r=this.buildRoute([]),google.maps.event.addListener(i,"click",function(t){e.state.infowindow.setMap(null),e.state.mode.addRoute&&(r.setPath(r.getPath().push(t.latLng)),e.setState({route:r}))}),$('a[href="#route"]').on("shown.bs.tab",function(){this.boundMapByWalk()}.bind(this)),this.setState({markers:l,route:r})}.bind(this))},boundMapByWalk:function(){var e=new google.maps.LatLngBounds;if(google.maps.event.trigger(this.state.map,"resize"),this.state.markers.getLength()){for(var t=0,a=this.state.markers.getLength();a>t;t++)e.extend(this.state.markers.getAt(t).getPosition());this.state.map.fitBounds(e)}},stopMarker:{url:CCM_THEME_PATH+"/images/marker.png",size:new google.maps.Size(30,46),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(11,44)},buildMarker:function(e,t){var a,n=this,i=this.state.map,l={animation:google.maps.Animation.DROP,draggable:!0,style:"stop",map:i,icon:this.stopMarker};return l.position=e instanceof google.maps.LatLng?e:this.state.map.center,t||(t={title:"",description:""}),l.title=JSON.stringify(t),a=new google.maps.Marker(l),google.maps.event.addListener(a,"click",function(){n.showInfoWindow(this)}),google.maps.event.addListener(a,"drag",function(){}),a},showInfoWindow:function(e){var t=document.createElement("div");React.render(React.createElement(i,{marker:e,deleteMarker:this.deleteMarker.bind(this,e),refresh:this.setState.bind(this,{})}),t),this.state.map.panTo(e.getPosition()),this.state.infowindow.setContent(t),this.state.infowindow.open(this.state.map,e)},buildRoute:function(e){var t=this.state.map,a=new google.maps.Polyline({strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:3,editable:!0,map:t});return google.maps.event.addListener(a,"rightclick",function(e){void 0!==e.vertex&&a.setPath(a.getPath().removeAt(e.vertex))}),google.maps.event.addListener(a,"mousedown",function(){this.state.infowindow.setMap(null)}.bind(this)),e.length>0&&a.setPath(e.map(function(e){return new google.maps.LatLng(e.lat,e.lng)})),a},deleteMarker:function(e){var t=this.state.markers;e.setMap(null),t.removeAt(t.indexOf(e)),this.setState({markers:t})},insertBefore:function(e,t){var a=this.state.markers;t?a.insertAt(a.getArray().indexOf(t),e):a.push(e),this.setState({markers:a})},toggleAddPoint:function(){var e=this.state.markers,t=this.buildMarker();e.push(t),this.setState({markers:e,mode:{}},function(){this.showInfoWindow(t)}.bind(this)),this.state.infowindow.setMap(null)},toggleAddRoute:function(){this.setState({mode:{addRoute:!this.state.mode.addRoute}}),this.state.infowindow.setMap(null)},clearRoute:function(){this.state.infowindow.setMap(null),this.state.route.setPath([]),this.setState({mode:{}})},getStateSimple:function(){var e=this.state.markers.getArray().map(function(e){var t=JSON.parse(e.title);return{lat:e.position.lat(),lng:e.position.lng(),title:t.title,description:t.description,style:"stop"}
}),t=[];return this.state.route&&(t=this.state.route.getPath().getArray().map(function(e){return{lat:e.lat(),lng:e.lng()}})),{markers:e,route:t}},render:function(){var e,t=this.props.i18n.translate.bind(this.props.i18n);return this.state.markers&&this.state.markers.length&&(e=[React.createElement("h3",{key:"stops"},t("Walk Stops")),React.createElement(n,{ref:"walkStopTable",key:1,i18n:this.props.i18n,markers:this.state.markers,deleteMarker:this.deleteMarker,insertBefore:this.insertBefore,showInfoWindow:this.showInfoWindow})]),React.createElement("div",{className:"tab-pane",id:"route"},React.createElement("div",{className:"page-header","data-section":"route"},React.createElement("h1",null,t("Share Your Route"))),React.createElement("div",{className:"alert alert-info"},t("Make sure to add a description to your meeting place, and the last stop. This is how people will find you on the day of your walk.")),React.createElement("div",{id:"route-help-panel"},React.createElement("a",{className:"accordion-toggle collapsed","data-toggle":"collapse","data-parent":"#route-menu",href:"#route-menu"},React.createElement("h2",{className:"lead"},t("Need help building your route?"))),React.createElement("ol",{id:"route-menu",className:"collapse",style:{height:0}},React.createElement("li",null,React.createElement("h4",null,t("Set a Meeting Place")),React.createElement("ol",null,React.createElement("li",null,t('Click "Meeting Place" to add a pinpoint on the map')),React.createElement("li",null,t("Click and drag it into position")),React.createElement("li",null,t("Fill out the form fields and press Save Meeting Place")))),React.createElement("li",null,React.createElement("h4",null,t("Add Stops")),React.createElement("ol",null,React.createElement("li",null,t('Click "Add Stop" to add a stop on the map')),React.createElement("li",null,t("Click and drag it into position")),React.createElement("li",null,t("Fill out the form fields and press Save Stop")),React.createElement("li",null,t("Repeat to add more stops")))),React.createElement("li",null,React.createElement("h4",null,t("Add Route")),React.createElement("ol",null,React.createElement("li",null,t("Click Add Route")),React.createElement("li",null,t("A point will appear on your meeting place, now click on each of the stops that flow to connect them.")),React.createElement("li",null,t("Click and drag the circles on the orange lines to make the path between each stop. Right click on a point to delete it.")),React.createElement("li",null,t("Click Save Route"))),React.createElement("p",null,t("If you want to delete your route to start over, click "),React.createElement("a",{href:"",className:"clear-route"},t("Clear Route")),".",t("Your Stops will not be deleted"))))),React.createElement("div",{id:"map-control-bar"},React.createElement("button",{ref:"addPoint",className:this.state.mode.addPoint?"active":"",onClick:this.toggleAddPoint},React.createElement("i",{className:"fa fa-map-marker"}),t("Add Stop")),React.createElement("button",{ref:"addRoute",className:this.state.mode.addRoute?"active":"",onClick:this.toggleAddRoute},React.createElement("i",{className:"fa fa-arrows"}),t("Add Route")),React.createElement("button",{ref:"clearroute",onClick:this.clearRoute},React.createElement("i",{className:"fa fa-eraser"}),t("Clear Route"))),React.createElement("div",{className:"map-notifications"}),React.createElement("div",{id:"map-canvas",ref:"gmap"}),e,React.createElement("hr",null))}})),n=React.createClass({displayName:"WalkStopTable",componentDidMount:function(){$(this.getDOMNode()).sortable({items:"tbody tr",update:function(e,t){this.props.insertBefore(this.state.markers.getAt(t.item.data("position")),this.state.markers.getAt(t.item.index()))}.bind(this)})},render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("table",{ref:"routeStops",className:"table table-bordered table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,e("Title")),React.createElement("th",null,e("Description")),React.createElement("th",null,React.createElement("i",{className:"fa fa-trash-o"})))),React.createElement("tbody",null,this.props.markers.getArray().map(function(e,t){var a=JSON.parse(e.title),n=function(){this.props.showInfoWindow(e)}.bind(this),i=function(){this.props.deleteMarker(e)}.bind(this);return React.createElement("tr",{"data-position":t,key:"marker"+t},React.createElement("td",{onClick:n},a.title),React.createElement("td",{onClick:n},a.description),React.createElement("td",null,React.createElement("a",{className:"delete-stop",onClick:i},React.createElement("i",{className:"fa fa-times-circle-o"}))))}.bind(this))))}}),i=React.createClass({displayName:"WalkInfoWindow",getInitialState:function(){return{marker:null}},componentWillMount:function(){this.setState({marker:this.props.marker})},setMarkerContent:function(e){var t=this.state.marker,a=JSON.parse(t.getTitle());e.target.classList.contains("marker-title")?a.title=e.target.value:e.target.classList.contains("marker-description")&&(a.description=e.target.value),t.setTitle(JSON.stringify(a)),this.setState({marker:t}),this.props.refresh()},render:function(){var e=this.state.marker,t=JSON.parse(e.getTitle());return React.createElement("div",{className:"stop-form"},React.createElement("input",{type:"text",onChange:this.setMarkerContent,value:t.title,placeholder:"Title of this stop",className:"marker-title"}),React.createElement("textarea",{className:"marker-description box-sizing",onChange:this.setMarkerContent,placeholder:"Description of this stop",value:t.description}),React.createElement("a",{onClick:this.props.deleteMarker},React.createElement("i",{className:"fa fa-trash-o"})))}});t.exports=a},{"../functions/helpers.jsx":16}],12:[function(e,t){var a=e("../functions/mixins.jsx"),n=React.createClass({displayName:"TeamBuilder",mixins:[a.linkedParentState],handleTeamMemberChange:function(e,t,a){var n=this.props.valueLink,i=n.value;i[a][e]=t,n.requestChange(i)},addLeader:function(){var e=this.props.valueLink,t=e.value;t.push({type:"leader","name-first":"","name-last":"",bio:"",primary:"",twitter:"",facebook:"",website:"",email:"",phone:""}),e.requestChange(t)},addOrganizer:function(){var e=this.props.valueLink,t=e.value;t.push({type:"organizer","name-first":"","name-last":"",institution:"",website:""}),e.requestChange(t)},addCommunityVoice:function(){var e=this.props.valueLink,t=e.value;t.push({type:"community","name-first":"","name-last":"",bio:"",twitter:"",facebook:"",website:""}),e.requestChange(t)},addVolunteer:function(){var e=this.props.valueLink,t=e.value;t.push({type:"volunteer","name-first":"","name-last":"",role:"",website:""}),e.requestChange(t)},render:function(){var e=this.props.valueLink,t=e.value,a=this.props.i18n.translate.bind(this.props.i18n),n=t.map(function(e,t){return e.phone=e.phone||"","you"===e.type?React.createElement(i,{i18n:this.props.i18n,key:t,value:e,onChange:this.handleTeamMemberChange}):"leader"===e.type?React.createElement(l,{i18n:this.props.i18n,key:t,value:e,onChange:this.handleTeamMemberChange}):"organizer"===e.type?React.createElement(r,{i18n:this.props.i18n,key:t,value:e,onChange:this.handleTeamMemberChange}):"community"===e.type?React.createElement(s,{i18n:this.props.i18n,key:t,value:e,onChange:this.handleTeamMemberChange}):"volunteer"===e.type?React.createElement(c,{i18n:this.props.i18n,key:t,value:e,onChange:this.handleTeamMemberChange}):void 0},this);return React.createElement("div",{className:"tab-pane",id:"team"},React.createElement("div",{className:"page-header","data-section":"team"},React.createElement("h1",null,a("Build Your Team"))),n,React.createElement("div",{className:"thumbnail team-member",id:"add-member"},React.createElement("h2",null,a("Who else is involved with this walk?")),React.createElement("h3",{className:"lead"},a("Click to add team members to your walk")," (",a("Optional"),")"),React.createElement("div",{className:"team-set"},React.createElement("div",{className:"team-row"},React.createElement("section",{className:"new-member",id:"new-walkleader",title:"Add New Walk Leader",onClick:this.addLeader},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},a("Walk Leader")),React.createElement("p",null,a("A person presenting information, telling stories, and fostering discussion during the Jane's Walk."))),React.createElement("section",{className:"new-member",id:"new-walkorganizer",title:"Add New Walk Organizer",onClick:this.addOrganizer},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},a("Walk Organizer")),React.createElement("p",null,a("A person responsible for outreach to new and returning Walk Leaders and Community Voices.")))),React.createElement("div",{className:"team-row"},React.createElement("section",{className:"new-member",id:"new-communityvoice",title:"Add A Community Voice",onClick:this.addCommunityVoice},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},a("Community Voice")),React.createElement("p",null,a("A community member with stories and/or personal experiences to share."))),React.createElement("section",{className:"new-member",id:"new-othermember",title:"Add another helper to your walk",onClick:this.addVolunteer},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},a("Volunteers")),React.createElement("p",null,a("Other people who are helping to make your walk happen.")))))))}}),i=React.createClass({displayName:"TeamOwner",mixins:[a.linkedTeamMemberState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"team-member thumbnail useredited",id:"walk-leader-me"},React.createElement("fieldset",null,React.createElement("legend",null,e("You")),React.createElement("div",{className:"row",id:"walkleader"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},e("Name")),React.createElement("input",{type:"text",id:"name",placeholder:"First",valueLink:this.linkProp("name-first")}),React.createElement("input",{type:"text",id:"name",placeholder:"Last",valueLink:this.linkProp("name-last")})),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"role"},e("Role")),React.createElement("select",{id:"role",valueLink:this.linkProp("role")},React.createElement("option",{defaultValue:"walk-leader"},e("Walk Leader")),React.createElement("option",{defaultValue:"co-walk-leader"},e("Co-Walk Leader")),React.createElement("option",{defaultValue:"walk-organizer"},e("Walk Organizer")))),React.createElement("div",{className:"item hide",id:"primary-walkleader-select"},React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",className:"role-check",checkLink:this.linkProp("primary")}),e("Primary Walk Leader"))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"bio"},e("Introduce yourself")),React.createElement("div",{className:"alert alert-info"},e("We recommend keeping your bio under 60 words")),React.createElement("textarea",{id:"bio",rows:"6",valueLink:this.linkProp("bio")})),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6 required"},React.createElement("label",{htmlFor:"you-email"},React.createElement("i",{className:"fa fa-envelope"})," ",e("Email")),React.createElement("input",{type:"email",id:"you-email",placeholder:"",valueLink:this.linkProp("email")})),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"leader-twitter"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"@"),React.createElement("input",{className:"col-md-12",id:"leader-twitter",type:"text",placeholder:"Username",valueLink:this.linkProp("twitter")})))),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",{type:"text",id:"facebook",placeholder:"",valueLink:this.linkProp("facebook")})),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"})," ",e("Website")),React.createElement("input",{type:"text",id:"website",placeholder:"",valueLink:this.linkProp("website")}))),React.createElement("hr",null),React.createElement("div",{className:"private"},React.createElement("h4",null,e("We'll keep this part private")),React.createElement("div",{className:"alert alert-info"},e("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6 tel required"},React.createElement("label",{htmlFor:"phone"},React.createElement("i",{className:"fa fa-phone-square"}),e("Phone Number")),React.createElement("input",{type:"tel",maxLength:"18",id:"phone",placeholder:"",valueLink:this.linkProp("phone")})))))))}}),l=React.createClass({displayName:"TeamLeader",mixins:[a.linkedTeamMemberState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"thumbnail team-member walk-leader clearfix",id:"walk-leader-new"},React.createElement("fieldset",null,React.createElement("legend",null,e("Walk Leader")),React.createElement("div",{id:"walkleader"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},e("Name")),React.createElement("div",{className:"item"},React.createElement("form",{className:"form-inline"},React.createElement("input",{type:"text",id:"name",placeholder:"First",valueLink:this.linkProp("name-first")}),React.createElement("input",{type:"text",id:"name",placeholder:"Last",valueLink:this.linkProp("name-last")})))),React.createElement("div",{className:"item",id:"primary-walkleader-select"},React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",className:"role-check",valueLink:this.linkProp("primary")}),e("Primary Walk Leader"))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"bio"},e("Introduce the walk leader")),React.createElement("div",{className:"alert alert-info"},e("We recommend keeping the bio under 60 words")),React.createElement("textarea",{className:"col-md-12",id:"bio",rows:"6",valueLink:this.linkProp("bio")})),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",{id:"prependedInput",className:"col-md-12",type:"text",placeholder:"Username",valueLink:this.linkProp("twitter")}))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",{type:"text",id:"facebook",placeholder:"",valueLink:this.linkProp("facebook")}))),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),e("Website")),React.createElement("input",{type:"text",id:"website",placeholder:"",valueLink:this.linkProp("website")}))),React.createElement("hr",null),React.createElement("h4",null,e("Private")),React.createElement("div",{className:"alert alert-info"},e("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6 required"},React.createElement("label",{htmlFor:"email"},React.createElement("i",{className:"fa fa-envelope"}),e("Email")),React.createElement("input",{type:"email",id:"email",placeholder:"Email",valueLink:this.linkProp("email")})),React.createElement("div",{className:"col-md-6 tel"},React.createElement("label",{htmlFor:"phone"},React.createElement("i",{className:"fa fa-phone-square"}),e("Phone Number")),React.createElement("input",{type:"tel",maxLength:"16",id:"phone",placeholder:"",valueLink:this.linkProp("phone")}))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member"},e("Remove Team Member"))))}}),r=React.createClass({displayName:"TeamOrganizer",mixins:[a.linkedTeamMemberState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"thumbnail team-member walk-organizer",id:"walk-organizer-new"},React.createElement("fieldset",null,React.createElement("legend",null,e("Walk Organizer")),React.createElement("div",{className:"row",id:"walkleader"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},e("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",{type:"text",id:"name",placeholder:"First",valueLink:this.linkProp("name-first")}),React.createElement("input",{type:"text",id:"name",placeholder:"Last",valueLink:this.linkProp("name-last")}))),React.createElement("label",{htmlFor:"affiliation"},e("Affilated Institution")," (",e("Optional"),")"),React.createElement("input",{type:"text",id:"name",placeholder:"e.g. City of Toronto",valueLink:this.linkProp("institution")}),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),e("Website")),React.createElement("input",{type:"text",className:"col-md-12",id:"website",placeholder:"",valueLink:this.linkProp("website")})))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member"},e("Remove Team Member"))))}}),s=React.createClass({displayName:"TeamCommunityVoice",mixins:[a.linkedTeamMemberState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"thumbnail team-member community-voice",id:"community-voice-new"},React.createElement("fieldset",null,React.createElement("legend",{id:"community-voice"},e("Community Voice")),React.createElement("div",{className:"row",id:"walkleader"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},e("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",{type:"text",id:"name",placeholder:"First",valueLink:this.linkProp("name-first")}),React.createElement("input",{type:"text",id:"name",placeholder:"Last",valueLink:this.linkProp("name-last")}))),React.createElement("div",{className:"item"},React.createElement("label",{htmlFor:"bio"},e("Tell everyone about this person")),React.createElement("div",{className:"alert alert-info"},e("We recommend keeping the bio under 60 words")),React.createElement("textarea",{className:"col-md-12",id:"bio",rows:"6",valueLink:this.linkProp("bio")})),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",{className:"col-md-12",id:"prependedInput",type:"text",placeholder:"Username",valueLink:this.linkProp("twitter")}))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",{type:"text",id:"facebook",placeholder:"",valueLink:this.linkProp("facebook")}))),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),e("Website")),React.createElement("input",{type:"text",className:"col-md-12",id:"website",placeholder:"",valueLink:this.linkProp("website")})))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member"},e("Remove Team Member"))))}}),c=React.createClass({displayName:"TeamVolunteer",mixins:[a.linkedTeamMemberState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("div",{className:"thumbnail team-member othermember",id:"othermember-new"},React.createElement("fieldset",null,React.createElement("legend",{id:"othermember"},e("Volunteers")),React.createElement("div",{className:"row",id:"walkleader"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},e("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",{type:"text",id:"name",placeholder:"First",valueLink:this.linkProp("name-first")}),React.createElement("input",{type:"text",id:"name",placeholder:"Last",valueLink:this.linkProp("name-last")}))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"role"},e("Role")),React.createElement("input",{type:"text",id:"role",valueLink:this.linkProp("role")})),React.createElement("div",{className:"row",id:"newwalkleader"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),e("Website")),React.createElement("input",{type:"text",className:"col-md-12",id:"website",placeholder:"",valueLink:this.linkProp("website")})))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-othermember"},e("Remove Team Member"))))}});t.exports=n},{"../functions/mixins.jsx":17}],13:[function(e,t){var a=e("../functions/mixins.jsx"),n=React.createClass({displayName:"ThemeSelect",mixins:[a.linkedParentState],maxChecked:3,render:function(){var e=this.props.i18n.translate.bind(this.props.i18n);return React.createElement("fieldset",{id:"theme-select"},React.createElement("legend",{className:"required-legend"},e("Themes")),React.createElement("div",{className:"alert alert-info"},e("Pick between %d and %d boxes.",1,this.maxChecked)),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,e("Community")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-activist")}),e("Activism")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-truecitizen")}),e("Citizenry")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-goodneighbour")}),e("Community")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-writer")}),e("Storytelling"))),React.createElement("fieldset",null,React.createElement("legend",null,e("City-building")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-architecturalenthusiast")}),e("Architecture")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-aesthete")}),e("Design")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-suburbanexplorer")}),e("Suburbs")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-moversandshakers")}),e("Transportation")))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,e("Society")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-gender")}),e("Gender")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-health")}),e("Health")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-historybuff")}),e("Heritage")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-nativeissues")}),e("Native Issues")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-religion")}),e("Religion"))),React.createElement("fieldset",null,React.createElement("legend",null,e("Expression")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-artist")}),e("Art")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-film")}),e("Film")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-bookworm")}),e("Literature")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-music")}),e("Music")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-play")}),e("Play")))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,e("The Natural World")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-nature-petlover")}),e("Animals")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-nature-greenthumb")}),e("Gardening")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-nature-naturelover")}),e("Nature")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-water")}),e("Water"))),React.createElement("fieldset",null,React.createElement("legend",null,e("Modernity")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-international")}),e("International Issues")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-military")}),e("Military")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-civic-commerce")}),e("Commerce")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-nightowl")}),e("Night Life")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-techie")}),e("Technology")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-urban-sports")}),e("Sports")),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkParentState("theme-culture-foodie")}),e("Food")))))}});t.exports=n},{"../functions/mixins.jsx":17}],14:[function(e,t){var a=e("../functions/mixins.jsx"),n=React.createClass({displayName:"WardSelect",mixins:[a.linkedParentState],render:function(){var e=this.props.i18n.translate.bind(this.props.i18n),t=this.props.wards;return t&&this.props.valueLink?React.createElement("fieldset",{id:"wards"},React.createElement("legend",null,e("Sub-locality")),React.createElement("div",{className:"item"},React.createElement("div",{className:"alert alert-info"},e("Choose a specific neighbourhood or area where your walk will take place.")),React.createElement("select",{id:"ward",name:"ward",valueLink:this.props.valueLink},React.createElement("option",{value:""},"Choose a region"),t.map(function(e,t){return React.createElement("option",{key:t,value:e.value},e.value)})))):React.createElement("fieldset",{id:"wards"})}});t.exports=n},{"../functions/mixins.jsx":17}],15:[function(e,t){var a=function(e,t){this.mapCanvas=t,this.map=new google.maps.Map(t,this.mapOptions),this.markers=this.buildMarkers(this.buildArray(e.markers)),this.route=this.buildRoute(this.buildArray(e.route)),this.map.mapTypes.set("map_style",this.styledMap),this.map.setMapTypeId("map_style"),document.querySelector(".walk-stops").style.display="block",this.centerMap(),this.addWalkStopMenuEvents()};Object.defineProperties(a.prototype,{markers:{value:[],writable:!0},route:{value:[],writable:!0},mapCanvas:{value:null,writable:!0},stopList:{value:null,writable:!0},mapOptions:{value:{zoom:16,scrollwheel:!1,zoomControl:!0,disableDefaultUI:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}}},styledMap:{value:new google.maps.StyledMapType([{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{visibility:"on"},{saturation:-100}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"landscape.natural",stylers:[{saturation:-100},{lightness:36}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:37}]},{featureType:"landscape.man_made",stylers:[{saturation:-100}]}],{name:"Styled Map"}),writable:!1,enumerable:!0,configurable:!0},mapMarker:{value:new google.maps.MarkerImage(CCM_THEME_PATH+"/images/marker.png")},mapMarkerActive:{value:new google.maps.MarkerImage(CCM_THEME_PATH+"/images/marker-active.png")},map:{value:null,writable:!0},walkPath:{value:{},writable:!0},infobox:{value:new InfoBox({content:document.getElementById("infobox"),maxWidth:150,pixelOffset:new google.maps.Size(-3,-25),alignBottom:!0,boxStyle:{background:"#fff",width:"280px",padding:"10px",border:"1px solid #eee"},closeBoxMargin:"-22px -22px 2px -8px",closeBoxURL:CCM_THEME_PATH+"/images/map-close.png",infoBoxClearance:new google.maps.Size(20,20)})},showInfoBox:{value:function(e,t,a){this.markers.forEach(function(a){a===e?(e.setIcon(this.mapMarkerActive),this.selectWalkStopMenuItem(t)):a.setIcon(this.mapMarker)}.bind(this)),this.map.panTo(e.getPosition()),this.infobox.setContent(React.renderToStaticMarkup(React.createElement("span",null,React.createElement("h4",null,JSON.parse(this.markers[t].getTitle()).name),React.createElement("p",null,JSON.parse(this.markers[t].getTitle()).description),a))),this.infobox.open(this.map,e),[].forEach.call(document.querySelectorAll(".walk-stops"),function(e){e.dataset.key==t?e.classList.add("active"):e.classList.remove("active")
})}},buildArray:{value:function(e){if(Array.isArray(e))return e.slice();var t=[];for(var a in e)t[a]=e[a];return t}},buildMarkers:{value:function(e){return e.map(function(e,t){var a=this,n=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),map:this.map,icon:this.mapMarker,title:JSON.stringify({name:e.title,description:e.description}),id:t});return google.maps.event.addListener(n,"click",function(){a.showInfoBox(this,t)}),n}.bind(this))}},buildRoute:{value:function(e){var t=new google.maps.Polyline({path:e.map(function(e){return new google.maps.LatLng(e.lat,e.lng)}),strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:4});return t.setMap(this.map),t}},addWalkStopMenuEvents:{value:function(){var e=this;[].forEach.call(document.querySelectorAll(".walk-stop"),function(t,a){t.addEventListener("click",function(){this.dataset.key==a&&google.maps.event.trigger(e.markers[a],"click")})})}},centerMap:{value:function(){var e=new google.maps.LatLngBounds,t=0;this.markers.forEach(function(a){e.extend(a.getPosition()),++t}),this.route.getPath().getArray().forEach(function(a){e.extend(a),++t}),t&&this.map.fitBounds(e),google.maps.event.addListenerOnce(this.map,"zoom_changed",function(){var e=this.map.getZoom();this.map.setZoom(Math.min(16,e))}.bind(this))}},selectWalkStopMenuItem:{value:function(e){[].forEach.call(document.querySelectorAll(".walk-stop"),function(t){t.dataset.key==e?(t.classList.add("active"),document.querySelector(".walk-stops-meta").scrollTop=t.offsetTop-10):t.classList.remove("active")})}}}),t.exports=a},{}],16:[function(e,t,a){a.renderAsNode=function(e){var t=document.createElement("span");return React.render(t,e),t},a.objectToArray=function(e){var t=[];for(var a in e)t[a]=e[a];return t.filter(function(e){return void 0!==e})}},{}],17:[function(e,t){t.exports.linkedParentState={linkParentState:function(e){var t=this.props.valueLink,a=t.value;return{value:a[e],requestChange:function(n){a[e]=n,t.requestChange(a)}}}},t.exports.linkedTeamMemberState={linkProp:function(e){var t=this.props.onChange,a=this._currentElement.key;return{value:this.props.value[e],requestChange:function(n){t(e,n,a)}}}}},{}],18:[function(e,t){function a(){var e=Array.prototype.slice.call(arguments);return e.shift().replace(/%(s|d)/g,function(){return e.shift()})}function n(e){e&&(this.translations=e)}Object.defineProperties(n.prototype,{translations:{value:{},writable:!0,enumerable:!0},translate:{value:function(e){var t=Array.prototype.slice.call(arguments);return t[0]=(this.translations[e]||[e])[0],a.apply(this,t)}},translatePlural:{value:function(e,t,n){var i=1!==n?1:0,l=(this.translations[e+"_"+t]||[e,t])[i];return a(l,n)}},translateContext:{value:function(e,t){var n=Array.prototype.slice.call(arguments,2);a.apply(this,[e,n])}}}),t.exports=n},{}],19:[function(e,t){"use strict";var a=e("../Page.jsx"),n=function(e){a.call(this,e),this._cards=this._element[0].querySelectorAll(".walk"),this._data=JanesWalk.walks,this._sortWalkList(),this._resetSelectElements(),this._addCreateWalkEvent(),this._addFilterEvents(),this._setThemeCounts(),this._captureHash(),this._addLinkListeners(),$(".walks-list .tag").tooltip()};n.prototype=Object.create(a.prototype,{_accessibility:{value:null,writable:!0},_cards:{value:null,writable:!0},_data:{value:null,writable:!0},_date:{value:null,writable:!0},_initiative:{value:null,writable:!0},_theme:{value:null,writable:!0},_ward:{value:null,writable:!0},_getFacebookDialogDonateObj:{value:function(){return{link:"http://janeswalk.org",name:"Jane's Walk"}}},_addLinkListeners:{value:function(){var e=this,t=(document.querySelector("a.see-all"),document.querySelectorAll(".walk .tags > li"));Array.prototype.forEach.call(t,function(t){t.addEventListener("click",function(t){t.preventDefault(),fullMode(),e._theme=this.dataset.theme,e._filterCards()})})}},_setupText2DonateInterstitials:{value:function(){var e,t,a,n,i=!1,l=this,r=null!==location.pathname.match(/\/canada\/[^/]+/);this._element.find("a.closeCatfishCta").click(function(e){e.preventDefault(),l._element.find(".catfish").hide(),jQuery.cookie("hasSeenDonateCatfish","1",{path:"/",domain:location.host})}),i&&r===!0&&(e=null!==jQuery.cookie("hasSeenDonateInterstitial")&&"undefined"!=typeof jQuery.cookie("hasSeenDonateInterstitial"),e===!1?(t=function(){jQuery.cookie("hasSeenDonateInterstitial","1",{path:"/",domain:location.host}),l._element.find(".catfish.c-donate").removeClass("hidden")},this._element.find(".overlay.o-donate").show(),this._element.find(".overlay.o-donate .o-background").click(t),this._element.find("a.closeModalCta").click(t),this._element.find("div.btnWrapper a").click(function(e){jQuery.cookie("hasSeenDonateInterstitial","1",{path:"/",domain:location.host}),jQuery.cookie("hasSeenDonateCatfish","1",{path:"/",domain:location.host}),e.preventDefault(),l._element.find(".o-donate").hide(),l._element.find(".o-shout").show(),l._element.find(".o-shout .icon-twitter").click(function(e){e.preventDefault(),a=encodeURIComponent("http://janeswalk.org/"),text=encodeURIComponent($(this).closest(".option").find(".copy").text().trim()),n="https://twitter.com/intent/tweet?url="+a+"&via=janeswalk&text="+text,window.open(n,"Twitter Share","width=640, height=320")}),l._element.find(".o-shout .icon-facebook").click(function(e){e.preventDefault();var t=l._getFacebookDialogDonateObj();t.description=$(this).closest(".option").find(".copy").text().trim(),new FacebookShareDialog(t).show()})})):(hasSeenDonateCatfish=null!==jQuery.cookie("hasSeenDonateCatfish")&&"undefined"!=typeof jQuery.cookie("hasSeenDonateCatfish"),hasSeenDonateCatfish===!1&&this._element.find(".catfish").removeClass("hidden")))}},_setThemeCounts:{value:function(){var e,t=this,a=Function.prototype.call.bind(Array.prototype.forEach),n=this._element[0],i=function(a){var n=a.getAttribute("value"),i=this.compare_fn||function(e,t){return e&&e[t]};if("*"!==n){e=0;for(var l in t._data)i(t._data[l][this.filter],n)&&++e;a.textContent+=" ("+e+")",0===e&&a.parentElement.removeChild(a)}};a(n.querySelectorAll('div.filters select[name="theme"] option'),i,{filter:"themes"}),a(n.querySelectorAll('div.filters select[name="accessibility"] option'),i,{filter:"accessibilities"}),a(n.querySelectorAll('div.filters select[name="ward"] option'),i,{filter:"wards"}),a(n.querySelectorAll('div.filters select[name="initiative"] option'),i,{filter:"initiatives"}),a(n.querySelectorAll('div.filters select[name="date"] option'),i,{filter:"datetimes",compare_fn:function(e,t){for(var a=0;a<e.length;a++)return-1!==e[a].date.indexOf(t)}})}},_resetSelectElements:{value:function(){var e=this;this._element.find("div.filters select").each(function(e,t){$(t).val("*")}),this._element.find(".initiatives").addClass("hidden"),this._element.find(".initiative").addClass("hidden"),this._element.find("#initiative").change(function(){"#"!==$(this).val()&&(e._element.find(".initiatives").removeClass("hidden"),e._element.find('[data-jw-initiative="'+$(this).val()+'"]').removeClass("hidden"))})}},_sortWalkList:{value:function(){var e=document.createElement("div"),t=Date.now()-60*(new Date).getTimezoneOffset()*1e3;e.classList.add("statusMessage"),e.textContent="Archived",Array.prototype.forEach.call(this._cards,function(a){var n=a.querySelector(".walkimage"),i=t-Number(a.dataset.timeEnd)>864e5;n&&i&&(a.dataset.archived=!0,n.appendChild(e.cloneNode(!0)))}),Array.prototype.sort.call(this._cards,function(e,t){return e.dataset.archived&&!t.dataset.archived?1:!e.dataset.archived&&t.dataset.archived?-1:e.dataset.timeEnd-t.dataset.timeEnd})}},_addCreateWalkEvent:{value:function(){var e=this,t=this._element.find(".create-walk");t.click(function(t){t.preventDefault(),0===e._element.find('a[href="/index.php/login/logout/"]').length?e._element.find(".overlay.o-connect").show():location.href=$(this).attr("href")})}},_captureHash:{value:function(){var e=this;if(""!==location.hash){var t=location.hash.replace("#","").split("&"),a="";$(t).each(function(t,n){a="_"+n.split("=")[0],e[a]=n.split("=")[1]}),this._filterCards(),this._element.find('select[name="ward"]').val(this._ward),this._element.find('select[name="theme"]').val(this._theme),this._element.find('select[name="accessibility"]').val(this._accessibility),this._element.find('select[name="initiative"]').val(this._initiative),this._element.find('select[name="date"]').val(this._date)}}},_setHash:{value:function(){location.hash="ward="+this._ward+"&theme="+this._theme+"&accessibility="+this._accessibility+"&initiative="+this._initiative+"&date="+this._date}},_filterCards:{value:function(){for(var e=this,t=0,a=function(e,t){return"*"===e||t&&t[e]},n=function(e,t){if("*"===t)return!0;for(var a=0;a<e.length;a++)if(e[a].date.indexOf(t)>-1)return!0;return!1},i=0,l=this._cards.length;l>i;i++)this._cards[i].classList.add("hidden");this._data.forEach(function(i,l){a(e._ward,i.wards)&&a(e._theme,i.themes)&&a(e._accessibility,i.accessibilities)&&a(e._initiative,i.initiatives)&&n(i.datetimes,e._date)&&(++t,e._cards[l].classList.remove("hidden"))}),this._element.find(".empty").addClass("hidden"),0===t&&this._element.find(".empty").removeClass("hidden")}},_addFilterEvents:{value:function(){var e=this;this._element.find("div.filters select").change(function(t){t.preventDefault(),e._ward="*",e._element.find('select[name="ward"]').length>0&&(e._ward=e._element.find('select[name="ward"]').val()),e._theme="*",e._element.find('select[name="theme"]').length>0&&(e._theme=e._element.find('select[name="theme"]').val()),e._accessibility="*",e._element.find('select[name="accessibility"]').length>0&&(e._accessibility=e._element.find('select[name="accessibility"]').val()),e._initiative="*",e._element.find('select[name="initiative"]').length>0&&(e._initiative=e._element.find('select[name="initiative"]').val()),e._date="*",e._element.find('select[name="date"]').length>0&&(e._date=e._element.find('select[name="date"]').val()),e._setHash(),e._filterCards()})}}}),t.exports=n},{"../Page.jsx":6}],20:[function(e,t){"use strict";var a=e("../Page.jsx"),n=function(e){a.call(this,e),this._addMapToggleEvents(),this._addBgImage(),this._addCityDropdownEvent(),this._addCreateWalkEvent()};n.prototype=Object.create(a.prototype,{_addCreateWalkEvent:{value:function(){var e=this,t=this._element.find('.calltoaction li a[href="/walk/form/"]');t.click(function(t){t.preventDefault(),e._element.find('a[href="/index.php/login/logout/"]').length?location.href=$(this).attr("href"):e._element.find(".overlay").show()})}},_addCityDropdownEvent:{value:function(){var e=this._element.find("select.pageListSelect");e.change(function(){location.href=e.val()})}},_addBgImage:{value:function(){var e=this._element.attr("data-backgroundImageUrl"),t=this._element.find(".backgroundImageBanner"),a=document.createElement("img");a.onload=function(){t.css({backgroundImage:"url("+e+")"}),t.removeClass("faded")},a.src=e}},_addCityButtonCta:{value:function(e,t){React.render(this._element.find(".calltoaction ul").first(),React.createElement("li",{className:"cityButtonCta"},React.createElement("a",{href:t,className:"btn btn-primary"},"View walks in ",e)))}},_addMapToggleEvents:{value:function(){var e=this._element.find(".overlap .controls a.showButton"),t=this._element.find(".overlap .controls a.closeButton");e.click(function(){$(".overlap").addClass("fullmap"),$(this).fadeOut(400,function(){t.fadeIn()}),$("html, body").animate({scrollTop:$(this).offset().top-100},800)}),t.click(function(){$(".overlap").removeClass("fullmap"),$(this).fadeOut(400,function(){e.fadeIn()})})}}}),t.exports=n},{"../Page.jsx":6}],21:[function(e,t){"use strict";var a=e("../Page.jsx"),n=function(e){try{a.call(this,e),this._showProperStep(),this._addTabClickEvents(),this._setupDisplayPictureFlashWidget(),this._addPictureDeleteEvent(),this._addPromoteWalkClickEvent(),this._addPromoteCityClickEvent(),this._addPromoteBlogPostClickEvent(),this._setupCityPromoteModalEvents(),this._setupWalkPromoteModalEvents(),this._setupBlogPostPromoteModalEvents(),this._setupPromoteSlideshows(),this._setupTransferWalkEvents(),this._setupUnpublishWalkEvents()}catch(t){console.error("Error initializing profile: "+t.stack)}};n.prototype=Object.create(a.prototype,{_slideIndexes:{value:{blogPost:0,city:0,walk:0},writable:!0},_currentTab:{value:null,writable:!0},_addPictureDeleteEvent:{value:function(){this._element.find('a[href="/index.php/profile/delete/"]').click(function(e){e.preventDefault(),$.ajax({type:"DELETE",url:$(this).attr("href"),success:function(){location.href="/index.php/profile/#tab=picture&success=1"}})})}},_addPromoteBlogPostClickEvent:{value:function(){var e=this,t=this._element.find(".column.blogPosts .subactions .promote");t.click(function(t){t.preventDefault();var a=e._getBlogPostObjById($(this).data("blogpostid"));e._element.find(".blogPostPromoteOverlay .copy").each(function(e,t){var n=$(t);n.data("blogpostpath",a.path),n.find(".objTitle").text(a.title)}),e._element.find(".blogPostPromoteOverlay").show()})}},_addPromoteCityClickEvent:{value:function(){var e=this,t=this._element.find("#cityBlock .promoteBtn");t.click(function(t){t.preventDefault(),e._element.find(".cityPromoteOverlay").show()})}},_getBlogPostObjById:{value:function(e){var t=this._element.find('[data-blogpostid="'+e+'"]');return{title:t.first().data("blogposttitle"),path:t.first().data("blogpostpath")}}},_getWalkObjById:{value:function(e){var t=this._element.find('[data-walkid="'+e+'"]');return{title:t.first().data("walktitle"),path:t.first().data("walkpath")}}},_addPromoteWalkClickEvent:{value:function(){var e=this,t=this._element.find(".column.city .subactions .promote,.column.walks .subactions .promote");t.click(function(t){t.preventDefault();var a=e._getWalkObjById($(this).data("walkid"));e._element.find(".walkPromoteOverlay .copy").each(function(e,t){t.dataset.walkpath=a.path,t.textContent=t.textContent.replace(/\[WALKNAME\]/,a.title)}),e._element.find(".walkPromoteOverlay").show()})}},_addTabClickEvents:{value:function(){var e=this;this._element.find("ul.nav-tabs li a").click(function(t){t.preventDefault(),e._currentTab=$(this).attr("data-tab"),e._showCurrentTab()}),this._element.find(".tabLink").click(function(t){t.preventDefault(),e._currentTab=$(this).attr("data-tab"),e._showCurrentTab()})}},_setupBlogPostPromoteModalEvents:{value:function(){var e=this;this._element.find(".blogPostPromoteOverlay").find(".icon-twitter").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showTwitterShareWindow("http://janeswalk.org"+a.data("blogpostpath"),a.text().trim())}),this._element.find(".blogPostPromoteOverlay").find(".icon-facebook").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showFacebookShareWindow("http://janeswalk.org"+a.data("blogpostpath"),"Jane's Walk",a.text().trim())}),this._element.find(".blogPostPromoteOverlay").find(".icon-envelope").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showEmailShareWindow("Jane's Walk in "+e._element.find("#profileWrapper").data("city"),a.text().trim())})}},_setupCityPromoteModalEvents:{value:function(){var e=this._element.find(".cityPromoteOverlay").data("citypath"),t=this._element.find(".cityPromoteOverlay").data("cityname"),a=this;this._element.find(".cityPromoteOverlay").find(".icon-twitter").click(function(t){t.preventDefault(),a._showTwitterShareWindow("http://janeswalk.org"+e,$(this).closest(".option").find(".copy").text().trim())}),this._element.find(".cityPromoteOverlay").find(".icon-facebook").click(function(t){t.preventDefault(),a._showFacebookShareWindow("http://janeswalk.org"+e,"Jane's Walk",$(this).closest(".option").find(".copy").text().trim())}),this._element.find(".cityPromoteOverlay").find(".icon-envelope").click(function(e){e.preventDefault(),a._showEmailShareWindow("Jane's Walk in "+t,$(this).closest(".option").find(".copy").text().trim())})}},_setupTransferWalkEvents:{value:function(){var e=this;this._element.find("#walk-transfer .users a").click(function(e){e.preventDefault(),$.get(this.getAttribute("href"),function(e){e.error?console.error(e.error):window.location=window.location})}),this._element.find("a.transfer").removeClass("hidden").click(function(t){t.preventDefault();for(var a=e._element.find("#walk-transfer"),n=this.getAttribute("href"),i=a.find(".users a"),l=0,r=i.length;r>l;l++)i[l].setAttribute("href",n+"transfer/"+i[l].getAttribute("data-uid"));a.modal()})}},_setupUnpublishWalkEvents:{value:function(){this._element.find("a.delete").click(function(e){e.preventDefault(),$.ajax({url:this.getAttribute("href"),type:"DELETE",success:function(){window.location=window.location}})})}},_setupDisplayPictureFlashWidget:{value:function(){window.ThumbnailBuilder_onSaveCompleted=function(){location.href="/index.php/profile/#tab=picture&success=1"};var e={bgcolor:"#ffffff",wmode:"transparent",quality:"high"},t={width:this._element.find("#flashContainer").attr("data-width"),height:this._element.find("#flashContainer").attr("data-height"),image:this._element.find("#flashContainer").attr("data-imagepath"),save:this._element.find("#flashContainer").attr("data-savepath")};"undefined"!=typeof swfobject&&swfobject.embedSWF(this._element.find("#flashContainer").attr("data-flashpath"),"flashContainer","500","400","10,0,0,0","includes/expressInstall.swf",t,e)}},_showSlide:{value:function(e){var t=this._slideIndexes[e],a=this._element.find('[data-slideshow="'+e+'"]'),n=a.find(".options .option");n.addClass("hidden"),$(n[t]).removeClass("hidden")}},_setupPromoteSlideshows:{value:function(){var e=this;this._element.find(".promoteOverlay .nav > a.left").click(function(t){t.preventDefault();{var a=$(this),n=a.data("slideshow"),i=a.closest(".promoteOverlay"),l=i.find(".options .option").length;i.find(".options .option")}0===e._slideIndexes[n]?e._slideIndexes[n]=l-1:--e._slideIndexes[n],e._showSlide(n)}),this._element.find(".promoteOverlay .nav > a.right").click(function(t){t.preventDefault();{var a=$(this),n=a.data("slideshow"),i=a.closest(".promoteOverlay"),l=i.find(".options .option").length;i.find(".options .option")}e._slideIndexes[n]===l-1?e._slideIndexes[n]=0:++e._slideIndexes[n],e._showSlide(n)})}},_setupWalkPromoteModalEvents:{value:function(){var e=this;this._element.find(".walkPromoteOverlay").find(".icon-twitter").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showTwitterShareWindow("http://janeswalk.org"+a.data("walkpath"),a.text().trim())}),this._element.find(".walkPromoteOverlay").find(".icon-facebook").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showFacebookShareWindow("http://janeswalk.org"+a.data("walkpath"),"Jane's Walk",a.text().trim())}),this._element.find(".walkPromoteOverlay").find(".icon-envelope").click(function(t){t.preventDefault();var a=$(this).closest(".option").find(".copy");e._showEmailShareWindow("Jane's Walk in "+e._element.find("#profileWrapper").data("city"),a.text().trim())})}},_showCurrentTab:{value:function(){this._element.find("ul.nav-tabs li.active").removeClass("active"),this._element.find('ul.nav-tabs li a[data-tab="'+this._currentTab+'"]').parent().addClass("active"),this._element.find("div.content div.block").addClass("hidden"),this._element.find('div.content div.block[data-tab="'+this._currentTab+'"]').removeClass("hidden"),location.hash="tab="+this._currentTab}},_showEmailShareWindow:{value:function(e,t){e=encodeURIComponent(e),t=encodeURIComponent(t);var a="mailto:?subject="+e+"&body="+t;window.open(a)}},_showFacebookShareWindow:{value:function(e,t,a){new FacebookShareDialog({link:e,name:t,description:a}).show()}},_showProperStep:{value:function(){if(""!==location.hash){var e,t=location.hash.split("&"),a={};$(t).each(function(t,n){e=n.split("="),a[e[0].replace("#","")]=e[1]}),this._currentTab=a.tab,this._showCurrentTab(),"undefined"!=typeof a.success&&1===parseInt(a.success)&&this._element.find('div.content div.block[data-tab="'+this._currentTab+'"]').addClass("success")}}},_showTwitterShareWindow:{value:function(e,t){e=encodeURIComponent(e),t=encodeURIComponent(t),t.length>130&&(t=t.substring(0,130)+"..."),e="https://twitter.com/intent/tweet?url="+e+"&via=janeswalk&text="+t,window.open(e,"Twitter Share","width=640, height=320")}}}),t.exports=n},{"../Page.jsx":6}],22:[function(e,t){"use strict";var a=e("../Page.jsx"),n=e("../FacebookShareDialog.jsx"),i=e("../elements/WalkMap.jsx"),l=function(e){a.call(this,e);var t=document.getElementById("map-canvas");this._addFacebookDialogEvents(),t&&new i(JanesWalk.page.gmap,t)};l.prototype=Object.create(a.prototype,{_addFacebookDialogEvents:{value:function(){var e=this;this._element.find(".facebookShareLink").click(function(t){t.preventDefault(),e.trackEvent("Walk","share.attempted","facebook");var a=e._getFacebookDialogObj();new n(a).show(e._facebookShareFailed,e._facebookShareSuccessful)})}},_facebookShareFailed:{value:function(){this.trackEvent("Walk","share.failed","facebook")}},_facebookShareSuccessful:{value:function(){this.trackEvent("Walk","share.successful","facebook")}},_getFacebookDialogObj:{value:function(){return{link:JanesWalk.page.url,picture:JanesWalk.page.pictureUrl,name:JanesWalk.page.title,description:JanesWalk.page.description,actions:{name:"View Jane's Walks in "+JanesWalk.page.city.name,link:JanesWalk.page.city.url}}}}}),t.exports=l},{"../FacebookShareDialog.jsx":5,"../Page.jsx":6,"../elements/WalkMap.jsx":15}]},{},[1]);